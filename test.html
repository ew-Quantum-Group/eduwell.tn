<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sahl | Pack Académique Tout-en-Un</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Vercel Web Analytics -->
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            color: #000;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Back Button */
        .back-button {
            position: fixed;
            top: 25px;
            left: 25px;
            background-color: rgba(255, 255, 255, 0.95);
            border: 1px solid #eee;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            text-decoration: none;
            color: #000;
        }

        .back-button:hover {
            background-color: #000;
            color: #fff;
            transform: translateX(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }

        .back-button i {
            font-size: 20px;
        }

        /* Main Content */
        .product-showcase {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            min-height: calc(100vh - 140px);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Product Image Carousel */
        .product-image-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .image-carousel {
            width: 100%;
            max-width: 400px;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
            animation: slideUp 0.6s ease-out 0.2s both;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .carousel-slide {
            min-width: 100%;
            aspect-ratio: 3/4;
            background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
        }

        .carousel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            transition: transform 0.5s ease;
        }

        .carousel-slide:hover .carousel-image {
            transform: scale(1.03);
        }

        .carousel-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            animation: fadeIn 0.8s ease-out 0.4s both;
        }

        .carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-dot.active {
            background-color: #000;
            transform: scale(1.3);
        }

        .carousel-dot:hover {
            background-color: #888;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            color: #000;
            font-size: 18px;
            opacity: 0;
        }

        .image-carousel:hover .carousel-nav {
            opacity: 1;
        }

        .carousel-nav:hover {
            background-color: #000;
            color: #fff;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-nav.prev {
            left: 15px;
        }

        .carousel-nav.next {
            right: 15px;
        }

        .image-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #000;
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.5px;
            z-index: 10;
            animation: popIn 0.5s ease-out 0.6s both;
        }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Product Details */
        .product-details {
            padding: 20px 0;
            animation: slideLeft 0.6s ease-out 0.3s both;
        }

        @keyframes slideLeft {
            from { opacity: 0; transform: translateX(40px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .brand-name {
            font-size: 16px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .product-title {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 15px;
            letter-spacing: -0.5px;
        }

        .product-subtitle {
            color: #555;
            font-size: 20px;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .current-price {
            font-size: 36px;
            font-weight: 700;
        }

        .original-price {
            color: #888;
            text-decoration: line-through;
            font-size: 24px;
            font-weight: 500;
        }

        .discount-badge {
            background-color: #000;
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
        }

        .product-description {
            color: #555;
            margin-bottom: 35px;
            font-size: 17px;
            max-width: 95%;
        }

        .product-description p {
            margin-bottom: 20px;
        }

        /* Subjects List */
        .subjects-container {
            margin-bottom: 40px;
        }

        .subjects-label {
            font-size: 14px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .subjects-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .subject {
            background-color: #f9f9f9;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            color: #555;
            transition: all 0.3s ease;
            border: 1px solid #eee;
        }

        .subject:hover {
            background-color: #000;
            color: #fff;
            transform: translateY(-2px);
        }

        /* Reserve Button */
        .reserve-button-container {
            margin-top: 50px;
        }

        .reserve-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background-color: #000;
            color: #fff;
            border: none;
            padding: 18px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 350px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            letter-spacing: 0.5px;
            animation: fadeIn 0.8s ease-out 0.8s both;
        }

        .reserve-button:hover {
            background-color: #222;
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .reserve-button:active {
            transform: translateY(-1px);
        }

        .reserve-button i {
            font-size: 20px;
        }

        /* Reservation Popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .popup-overlay.active {
            display: flex;
            opacity: 1;
        }

        .popup-container {
            background-color: #fff;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            transform: translateY(20px) scale(0.95);
            opacity: 0;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s ease;
        }

        .popup-overlay.active .popup-container {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .popup-header {
            padding: 25px 30px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .popup-title {
            font-size: 24px;
            font-weight: 600;
            color: #000;
        }

        .close-popup {
            background: none;
            border: none;
            font-size: 22px;
            color: #888;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-popup:hover {
            color: #000;
            background-color: #f5f5f5;
            transform: rotate(90deg);
        }

        .popup-content {
            padding: 30px;
        }

        /* Step Navigation */
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .step {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #888;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .step.active {
            background-color: #000;
            color: #fff;
            transform: scale(1.1);
        }

        .step.completed {
            background-color: #555;
            color: #fff;
        }

        /* Form Styles */
        .form-step {
            display: none;
            animation: fadeSlideIn 0.4s ease-out;
        }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .form-step.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
            font-size: 15px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            background-color: #fff;
        }

        .form-input:focus {
            outline: none;
            border-color: #000;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
            transform: translateY(-1px);
        }

        .form-input.error {
            border-color: #e74c3c;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .form-input.success {
            border-color: #2ecc71;
        }

        .error-message {
            color: #e74c3c;
            font-size: 13px;
            margin-top: 5px;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .error-message.show {
            display: block;
        }

        .whatsapp-hint {
            color: #888;
            font-size: 13px;
            margin-top: 5px;
        }

        .grade-hint {
            color: #888;
            font-size: 13px;
            margin-top: 5px;
        }

        .book-details {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease;
        }

        .book-detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .book-detail-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .detail-label {
            color: #888;
            font-weight: 500;
        }

        .detail-value {
            color: #000;
            font-weight: 600;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .popup-button {
            flex: 1;
            padding: 16px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .popup-button.primary {
            background-color: #000;
            color: #fff;
        }

        .popup-button.primary:hover {
            background-color: #222;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .popup-button.primary:disabled {
            background-color: #888;
            cursor: not-allowed;
            transform: none;
        }

        .popup-button.secondary {
            background-color: #f5f5f5;
            color: #000;
        }

        .popup-button.secondary:hover {
            background-color: #eee;
            transform: translateY(-2px);
        }

        /* Loading Animation */
        .loading-container {
            text-align: center;
            padding: 40px 30px;
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .loading-container.active {
            display: block;
        }

        .loading-spinner {
            width: 70px;
            height: 70px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #000;
            border-radius: 50%;
            margin: 0 auto 25px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #000;
        }

        .loading-text {
            color: #555;
            margin-bottom: 30px;
            font-size: 16px;
        }

        /* Success Message */
        .success-message {
            text-align: center;
            padding: 40px 30px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .success-message.active {
            display: block;
        }

        .success-icon {
            width: 70px;
            height: 70px;
            background-color: #000;
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin: 0 auto 25px;
            animation: popIn 0.6s ease-out;
        }

        .success-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #000;
            animation: fadeIn 0.5s ease 0.2s both;
        }

        .success-text {
            color: #555;
            margin-bottom: 30px;
            font-size: 16px;
            animation: fadeIn 0.5s ease 0.3s both;
        }

        /* Footer */
        .footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #eee;
            text-align: center;
            color: #888;
            font-size: 14px;
            animation: fadeIn 0.8s ease-out 1s both;
        }

        .footer-brand {
            font-size: 24px;
            font-weight: 700;
            color: #000;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .product-showcase {
                gap: 40px;
            }
            
            .product-title {
                font-size: 40px;
            }
            
            .product-subtitle {
                font-size: 18px;
            }
            
            .current-price {
                font-size: 32px;
            }
        }

        @media (max-width: 768px) {
            .product-showcase {
                grid-template-columns: 1fr;
                gap: 50px;
                min-height: auto;
            }
            
            .image-carousel {
                max-width: 350px;
                margin: 0 auto;
            }
            
            .carousel-nav {
                opacity: 1;
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .carousel-nav.prev {
                left: 10px;
            }
            
            .carousel-nav.next {
                right: 10px;
            }
            
            .back-button {
                top: 15px;
                left: 15px;
                width: 45px;
                height: 45px;
            }
            
            .popup-container {
                width: 95%;
            }
        }

        @media (max-width: 576px) {
            .product-title {
                font-size: 36px;
            }
            
            .product-subtitle {
                font-size: 17px;
            }
            
            .current-price {
                font-size: 28px;
            }
            
            .original-price {
                font-size: 20px;
            }
            
            .product-description {
                font-size: 16px;
            }
            
            .reserve-button {
                padding: 16px 30px;
                font-size: 17px;
                max-width: 100%;
            }
            
            .container {
                padding: 10px;
            }
            
            .subjects-list {
                justify-content: center;
            }
            
            .popup-header {
                padding: 20px;
            }
            
            .popup-content {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
        }

        @media (max-width: 400px) {
            .product-title {
                font-size: 32px;
            }
            
            .image-carousel {
                max-width: 300px;
            }
            
            .carousel-nav {
                width: 30px;
                height: 30px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Back Button -->
        <a href="#" class="back-button" id="backButton">
            <i class="fas fa-arrow-left"></i>
        </a>

        <div class="product-showcase">
            <!-- Product Image Carousel -->
            <div class="product-image-container">
                <div class="image-carousel">
                    <div class="image-badge">5-en-1</div>
                    
                    <button class="carousel-nav prev" id="prevButton">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="carousel-track" id="carouselTrack">
                        <div class="carousel-slide">
                            <img src="https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1376&q=80" 
                                 alt="Pack Sahl - Couverture avant" class="carousel-image">
                        </div>
                        <div class="carousel-slide">
                            <img src="https://images.unsplash.com/photo-1506880018603-83d5b814b5a6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80" 
                                 alt="Pack Sahl - Aperçu intérieur" class="carousel-image">
                        </div>
                        <div class="carousel-slide">
                            <img src="https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1398&q=80" 
                                 alt="Pack Sahl - Exemple de contenu" class="carousel-image">
                        </div>
                    </div>
                    
                    <button class="carousel-nav next" id="nextButton">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="carousel-controls" id="carouselDots">
                    <div class="carousel-dot active" data-index="0"></div>
                    <div class="carousel-dot" data-index="1"></div>
                    <div class="carousel-dot" data-index="2"></div>
                </div>
            </div>

            <!-- Product Details -->
            <div class="product-details">
                <div class="brand-name">Éducation Sahl</div>
                <h1 class="product-title">Pack Académique Tout-en-Un</h1>
                <p class="product-subtitle">Maîtrisez cinq matières essentielles dans un seul guide complet</p>
                
                <div class="product-price">
                    <div class="current-price">49,99 €</div>
                    <div class="original-price">74,99 €</div>
                    <div class="discount-badge">Économisez 33%</div>
                </div>
                
                <div class="product-description">
                    <p>Ce pack de livres complet combine cinq matières académiques essentielles en un seul volume magnifiquement conçu. Parfait pour les étudiants, les professionnels et les apprenants tout au long de la vie recherchant une ressource éducative unifiée.</p>
                    <p>Chaque matière est présentée avec clarté et profondeur, comprenant des exemples pratiques, des explications étape par étape et des applications réelles.</p>
                </div>
                
                <div class="subjects-container">
                    <div class="subjects-label">Matières incluses</div>
                    <div class="subjects-list">
                        <div class="subject">Mathématiques</div>
                        <div class="subject">Physique</div>
                        <div class="subject">Sciences</div>
                        <div class="subject">Informatique</div>
                        <div class="subject">Anglais</div>
                    </div>
                </div>
                
                <div class="reserve-button-container">
                    <button class="reserve-button" id="reserveButton">
                        <i class="fas fa-bookmark"></i>
                        <span>Réserver mon livre</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <div class="footer-brand">Sahl</div>
            <p>Ressources éducatives premium pour l'apprenant moderne</p>
            <p>© 2023 Éducation Sahl. Tous droits réservés.</p>
        </div>
    </div>

    <!-- Reservation Popup -->
    <div class="popup-overlay" id="reservationPopup">
        <div class="popup-container">
            <div class="popup-header">
                <h3 class="popup-title">Réserver votre livre</h3>
                <button class="close-popup" id="closePopup">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="popup-content">
                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" id="step1Indicator">1</div>
                    <div class="step" id="step2Indicator">2</div>
                    <div class="step" id="step3Indicator">3</div>
                </div>
                
                <!-- Step 1: Book Details -->
                <div class="form-step active" id="step1">
                    <div class="book-details">
                        <div class="book-detail-item">
                            <span class="detail-label">Produit :</span>
                            <span class="detail-value">Pack Académique Tout-en-Un</span>
                        </div>
                        <div class="book-detail-item">
                            <span class="detail-label">Prix :</span>
                            <span class="detail-value">49,99 €</span>
                        </div>
                        <div class="book-detail-item">
                            <span class="detail-label">Matières :</span>
                            <span class="detail-value">5 matières essentielles</span>
                        </div>
                        <div class="book-detail-item">
                            <span class="detail-label">Format :</span>
                            <span class="detail-value">Relié, 500 pages</span>
                        </div>
                    </div>
                    
                    <p style="color: #555; margin-bottom: 30px;">
                        Réservez votre exemplaire du pack de livres académique complet. Nous vous contacterons pour les détails de livraison une fois votre réservation confirmée.
                    </p>
                    
                    <div class="button-group">
                        <button class="popup-button primary" id="takeCopyButton">
                            Prendre un exemplaire
                        </button>
                    </div>
                </div>
                
                <!-- Step 2: Contact Information -->
                <div class="form-step" id="step2">
                    <form id="contactForm">
                        <div class="form-group">
                            <label class="form-label" for="name">Nom complet</label>
                            <input type="text" id="name" class="form-input" placeholder="Entrez votre nom complet" required>
                            <div class="error-message" id="nameError">Veuillez entrer votre nom complet</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="whatsapp">Numéro WhatsApp</label>
                            <input type="tel" id="whatsapp" class="form-input" placeholder="Exemple : 91234567" required>
                            <div class="error-message" id="whatsappError">Veuillez entrer un numéro WhatsApp valide</div>
                            <div class="whatsapp-hint">Doit commencer par 2, 4, 5 ou 9 et avoir au moins 8 chiffres</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="email">Adresse e-mail</label>
                            <input type="email" id="email" class="form-input" placeholder="Entrez votre adresse e-mail" required>
                            <div class="error-message" id="emailError">Veuillez entrer une adresse e-mail valide</div>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="popup-button secondary" id="backToStep1">
                                Retour
                            </button>
                            <button type="button" class="popup-button primary" id="nextToStep3">
                                Suivant
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Step 3: Grades Information -->
                <div class="form-step" id="step3">
                    <p style="color: #555; margin-bottom: 25px;">
                        Veuillez fournir vos notes du trimestre actuel (0-20) pour chaque matière :
                    </p>
                    
                    <!-- Visible Grades Form -->
                    <div id="gradesForm">
                        <div class="form-group">
                            <label class="form-label" for="mathNote">Note de Mathématiques</label>
                            <input type="text" id="mathNote" class="form-input" placeholder="Entrez la note (0-20)" required>
                            <div class="error-message" id="mathNoteError">Veuillez entrer une note valide entre 0 et 20</div>
                            <div class="grade-hint">Entrez un nombre entre 0 et 20 (décimales autorisées)</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="physicsNote">Note de Physique</label>
                            <input type="text" id="physicsNote" class="form-input" placeholder="Entrez la note (0-20)" required>
                            <div class="error-message" id="physicsNoteError">Veuillez entrer une note valide entre 0 et 20</div>
                            <div class="grade-hint">Entrez un nombre entre 0 et 20 (décimales autorisées)</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="scienceNote">Note de Sciences</label>
                            <input type="text" id="scienceNote" class="form-input" placeholder="Entrez la note (0-20)" required>
                            <div class="error-message" id="scienceNoteError">Veuillez entrer une note valide entre 0 et 20</div>
                            <div class="grade-hint">Entrez un nombre entre 0 et 20 (décimales autorisées)</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="englishNote">Note d'Anglais</label>
                            <input type="text" id="englishNote" class="form-input" placeholder="Entrez la note (0-20)" required>
                            <div class="error-message" id="englishNoteError">Veuillez entrer une note valide entre 0 et 20</div>
                            <div class="grade-hint">Entrez un nombre entre 0 et 20 (décimales autorisées)</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="informaticsNote">Note d'Informatique</label>
                            <input type="text" id="informaticsNote" class="form-input" placeholder="Entrez la note (0-20)" required>
                            <div class="error-message" id="informaticsNoteError">Veuillez entrer une note valide entre 0 et 20</div>
                            <div class="grade-hint">Entrez un nombre entre 0 et 20 (décimales autorisées)</div>
                        </div>
                        
                        <div class="button-group">
                            <button type="button" class="popup-button secondary" id="backToStep2">
                                Retour
                            </button>
                            <button type="button" class="popup-button primary" id="submitReservation">
                                Soumettre la réservation
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Loading Animation -->
                <div class="loading-container" id="loadingMessage">
                    <div class="loading-spinner"></div>
                    <h3 class="loading-title">Envoi de votre réservation</h3>
                    <p class="loading-text">Veuillez patienter pendant que nous traitons votre demande...</p>
                </div>
                
                <!-- Success Message -->
                <div class="success-message" id="successMessage">
                    <div class="success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h3 class="success-title">Réservation confirmée !</h3>
                    <p class="success-text">Votre demande a été envoyée avec succès. Nous vous contacterons bientôt.</p>
                    <button class="popup-button primary" id="closeSuccess">
                        Terminé
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Back button functionality
        const backButton = document.getElementById('backButton');
        
        backButton.addEventListener('click', function(e) {
            e.preventDefault();
            
            if (document.referrer && document.referrer.includes(window.location.hostname)) {
                window.history.back();
            } else {
                window.location.href = 'https://sahl-education.com';
            }
        });

        // Image Carousel Functionality
        const carouselTrack = document.getElementById('carouselTrack');
        const carouselSlides = document.querySelectorAll('.carousel-slide');
        const carouselDots = document.querySelectorAll('.carousel-dot');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        
        let currentSlide = 0;
        const totalSlides = carouselSlides.length;
        
        // Initialize carousel position
        updateCarousel();
        
        // Previous button click
        prevButton.addEventListener('click', () => {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateCarousel();
        });
        
        // Next button click
        nextButton.addEventListener('click', () => {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        });
        
        // Dot navigation
        carouselDots.forEach(dot => {
            dot.addEventListener('click', () => {
                currentSlide = parseInt(dot.getAttribute('data-index'));
                updateCarousel();
            });
        });
        
        // Auto-advance carousel every 5 seconds
        let autoSlideInterval = setInterval(() => {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }, 5000);
        
        // Pause auto-advance on hover
        const carousel = document.querySelector('.image-carousel');
        carousel.addEventListener('mouseenter', () => {
            clearInterval(autoSlideInterval);
        });
        
        carousel.addEventListener('mouseleave', () => {
            autoSlideInterval = setInterval(() => {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }, 5000);
        });
        
        // Update carousel position and active dot
        function updateCarousel() {
            // Move track
            carouselTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            // Update active dot
            carouselDots.forEach((dot, index) => {
                if (index === currentSlide) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Reservation Popup Functionality
        const reserveButton = document.getElementById('reserveButton');
        const reservationPopup = document.getElementById('reservationPopup');
        const closePopup = document.getElementById('closePopup');
        const closeSuccess = document.getElementById('closeSuccess');
        
        // Form steps and buttons
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const loadingMessage = document.getElementById('loadingMessage');
        const successMessage = document.getElementById('successMessage');
        
        const step1Indicator = document.getElementById('step1Indicator');
        const step2Indicator = document.getElementById('step2Indicator');
        const step3Indicator = document.getElementById('step3Indicator');
        
        const takeCopyButton = document.getElementById('takeCopyButton');
        const backToStep1 = document.getElementById('backToStep1');
        const nextToStep3 = document.getElementById('nextToStep3');
        const backToStep2 = document.getElementById('backToStep2');
        const submitReservation = document.getElementById('submitReservation');
        
        let currentStep = 1;
        
        // Open reservation popup
        reserveButton.addEventListener('click', () => {
            reservationPopup.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        
        // Close popup
        closePopup.addEventListener('click', closeReservationPopup);
        closeSuccess.addEventListener('click', closeReservationPopup);
        
        // Close popup when clicking outside
        reservationPopup.addEventListener('click', (e) => {
            if (e.target === reservationPopup) {
                closeReservationPopup();
            }
        });
        
        // Close popup with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && reservationPopup.classList.contains('active')) {
                closeReservationPopup();
            }
        });
        
        function closeReservationPopup() {
            reservationPopup.classList.remove('active');
            document.body.style.overflow = 'auto';
            resetReservationForm();
        }
        
        function resetReservationForm() {
            // Reset to step 1
            currentStep = 1;
            step1.classList.add('active');
            step2.classList.remove('active');
            step3.classList.remove('active');
            loadingMessage.classList.remove('active');
            successMessage.classList.remove('active');
            
            // Reset indicators
            step1Indicator.classList.add('active');
            step2Indicator.classList.remove('active');
            step2Indicator.classList.remove('completed');
            step3Indicator.classList.remove('active');
            step3Indicator.classList.remove('completed');
            
            // Reset form values and errors
            document.getElementById('contactForm').reset();
            clearAllErrors();
            
            // Clear grade inputs
            document.getElementById('mathNote').value = '';
            document.getElementById('physicsNote').value = '';
            document.getElementById('scienceNote').value = '';
            document.getElementById('englishNote').value = '';
            document.getElementById('informaticsNote').value = '';
        }
        
        // Clear all error messages and styles
        function clearAllErrors() {
            // Clear error messages
            document.querySelectorAll('.error-message').forEach(error => {
                error.classList.remove('show');
            });
            
            // Clear error styles
            document.querySelectorAll('.form-input.error').forEach(input => {
                input.classList.remove('error');
            });
            
            document.querySelectorAll('.form-input.success').forEach(input => {
                input.classList.remove('success');
            });
        }
        
        // WhatsApp validation function
        function isValidWhatsAppNumber(number) {
            // Remove any non-digit characters
            const cleanNumber = number.replace(/\D/g, '');
            
            // Check length (at least 8 digits)
            if (cleanNumber.length < 8) {
                return false;
            }
            
            // Check first digit (must be 2, 4, 5, or 9)
            const firstDigit = cleanNumber.charAt(0);
            const validFirstDigits = ['2', '4', '5', '9'];
            
            if (!validFirstDigits.includes(firstDigit)) {
                return false;
            }
            
            return true;
        }
        
        // Grade validation function
        function isValidGrade(grade) {
            // Check if it's a valid number
            const num = parseFloat(grade);
            if (isNaN(num)) {
                return false;
            }
            
            // Check if it's between 0 and 20 (inclusive)
            if (num < 0 || num > 20) {
                return false;
            }
            
            // Check if it's a valid decimal (optional)
            const gradeRegex = /^\d+(\.\d{1,2})?$/;
            if (!gradeRegex.test(grade)) {
                return false;
            }
            
            return true;
        }
        
        // Email validation function
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Validate a single field
        function validateField(fieldId, validationFunction, errorElementId) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(errorElementId);
            const value = field.value.trim();
            
            if (!value) {
                field.classList.add('error');
                field.classList.remove('success');
                errorElement.textContent = 'Ce champ est requis';
                errorElement.classList.add('show');
                return false;
            }
            
            if (!validationFunction(value)) {
                field.classList.add('error');
                field.classList.remove('success');
                errorElement.classList.add('show');
                return false;
            }
            
            field.classList.remove('error');
            field.classList.add('success');
            errorElement.classList.remove('show');
            return true;
        }
        
        // Validate Step 2 form
        function validateStep2() {
            const isNameValid = validateField('name', (value) => value.length >= 2, 'nameError');
            const isWhatsAppValid = validateField('whatsapp', isValidWhatsAppNumber, 'whatsappError');
            const isEmailValid = validateField('email', isValidEmail, 'emailError');
            
            return isNameValid && isWhatsAppValid && isEmailValid;
        }
        
        // Validate Step 3 form
        function validateStep3() {
            const isMathValid = validateField('mathNote', isValidGrade, 'mathNoteError');
            const isPhysicsValid = validateField('physicsNote', isValidGrade, 'physicsNoteError');
            const isScienceValid = validateField('scienceNote', isValidGrade, 'scienceNoteError');
            const isEnglishValid = validateField('englishNote', isValidGrade, 'englishNoteError');
            const isInformaticsValid = validateField('informaticsNote', isValidGrade, 'informaticsNoteError');
            
            return isMathValid && isPhysicsValid && isScienceValid && isEnglishValid && isInformaticsValid;
        }
        
        // Step navigation
        takeCopyButton.addEventListener('click', () => {
            step1.classList.remove('active');
            step2.classList.add('active');
            step1Indicator.classList.remove('active');
            step1Indicator.classList.add('completed');
            step2Indicator.classList.add('active');
            currentStep = 2;
            clearAllErrors();
        });
        
        backToStep1.addEventListener('click', () => {
            step2.classList.remove('active');
            step1.classList.add('active');
            step1Indicator.classList.add('active');
            step2Indicator.classList.remove('active');
            step2Indicator.classList.remove('completed');
            currentStep = 1;
            clearAllErrors();
        });
        
        nextToStep3.addEventListener('click', () => {
            // Validate contact form
            if (!validateStep2()) {
                return;
            }
            
            step2.classList.remove('active');
            step3.classList.add('active');
            step2Indicator.classList.remove('active');
            step2Indicator.classList.add('completed');
            step3Indicator.classList.add('active');
            currentStep = 3;
            clearAllErrors();
        });
        
        backToStep2.addEventListener('click', () => {
            step3.classList.remove('active');
            step2.classList.add('active');
            step2Indicator.classList.add('active');
            step3Indicator.classList.remove('active');
            step2Indicator.classList.remove('completed');
            currentStep = 2;
            clearAllErrors();
        });
        
        // Function to send email using Fetch API (no redirect)
        async function sendEmailWithFetch(userData) {
            // Create form data for FormSubmit
            const formData = new FormData();
            
            // Add all fields
            formData.append('_subject', 'Nouvelle Réservation de Livre - Éducation Sahl');
            formData.append('_template', 'table');
            formData.append('_captcha', 'false');
            formData.append('_replyto', userData.email);
            formData.append('_cc', userData.email);
            
            // User data
            formData.append('Nom', userData.name);
            formData.append('WhatsApp', userData.whatsapp);
            formData.append('Email', userData.email);
            formData.append('Mathématiques', userData.grades.math);
            formData.append('Physique', userData.grades.physics);
            formData.append('Sciences', userData.grades.science);
            formData.append('Anglais', userData.grades.english);
            formData.append('Informatique', userData.grades.informatics);
            formData.append('Date_Réservation', new Date().toLocaleString('fr-FR'));
            formData.append('Produit', 'Pack Académique Tout-en-Un');
            formData.append('Prix', '49,99 €');
            
            // Use Fetch API to send to FormSubmit
            try {
                const response = await fetch('https://formsubmit.co/ajax/eduwelltn@gmail.com', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        name: userData.name,
                        whatsapp: userData.whatsapp,
                        email: userData.email,
                        math_grade: userData.grades.math,
                        physics_grade: userData.grades.physics,
                        science_grade: userData.grades.science,
                        english_grade: userData.grades.english,
                        informatics_grade: userData.grades.informatics,
                        reservation_date: new Date().toLocaleString('fr-FR'),
                        _subject: 'Nouvelle Réservation de Livre - Éducation Sahl',
                        _template: 'table',
                        _captcha: 'false'
                    })
                });
                
                const result = await response.json();
                
                if (result.success === "true" || result.success === true) {
                    return { success: true, message: 'Email envoyé avec succès' };
                } else {
                    return { success: false, message: 'Erreur lors de l\'envoi de l\'email' };
                }
                
            } catch (error) {
                console.error('Erreur Fetch:', error);
                return { success: false, message: 'Erreur réseau' };
            }
        }
        
        // Alternative method using XMLHttpRequest
        function sendEmailWithXHR(userData) {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                const url = 'https://formsubmit.co/ajax/eduwelltn@gmail.com';
                
                const data = JSON.stringify({
                    name: userData.name,
                    whatsapp: userData.whatsapp,
                    email: userData.email,
                    math_grade: userData.grades.math,
                    physics_grade: userData.grades.physics,
                    science_grade: userData.grades.science,
                    english_grade: userData.grades.english,
                    informatics_grade: userData.grades.informatics,
                    reservation_date: new Date().toLocaleString('fr-FR'),
                    _subject: 'Nouvelle Réservation de Livre - Éducation Sahl',
                    _template: 'table',
                    _captcha: 'false',
                    _replyto: userData.email
                });
                
                xhr.open('POST', url, true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.setRequestHeader('Accept', 'application/json');
                
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            try {
                                const response = JSON.parse(xhr.responseText);
                                if (response.success === "true" || response.success === true) {
                                    resolve({ success: true, message: 'Email envoyé avec succès' });
                                } else {
                                    resolve({ success: false, message: 'Erreur de réponse du serveur' });
                                }
                            } catch (e) {
                                resolve({ success: false, message: 'Erreur de traitement de la réponse' });
                            }
                        } else {
                            resolve({ success: false, message: 'Erreur HTTP: ' + xhr.status });
                        }
                    }
                };
                
                xhr.onerror = function() {
                    resolve({ success: false, message: 'Erreur réseau' });
                };
                
                xhr.send(data);
            });
        }
        
        // Submit reservation with email sending (NO REDIRECT)
        submitReservation.addEventListener('click', async (e) => {
            e.preventDefault();
            
            // Validate grades form
            if (!validateStep3()) {
                return;
            }
            
            // Get all form data
            const userData = {
                name: document.getElementById('name').value.trim(),
                whatsapp: document.getElementById('whatsapp').value.trim(),
                email: document.getElementById('email').value.trim(),
                grades: {
                    math: document.getElementById('mathNote').value.trim(),
                    physics: document.getElementById('physicsNote').value.trim(),
                    science: document.getElementById('scienceNote').value.trim(),
                    english: document.getElementById('englishNote').value.trim(),
                    informatics: document.getElementById('informaticsNote').value.trim()
                }
            };
            
            // Show loading animation
            step3.classList.remove('active');
            loadingMessage.classList.add('active');
            
            try {
                // Log the data that will be sent
                console.log('Envoi des données de réservation:', userData);
                console.log('Email de destination: eduwelltn@gmail.com');
                
                // Try to send email using XHR (more reliable)
                const result = await sendEmailWithXHR(userData);
                
                // Simulate sending delay for better UX
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                if (result.success) {
                    // Show success message
                    loadingMessage.classList.remove('active');
                    successMessage.classList.add('active');
                    step3Indicator.classList.remove('active');
                    step3Indicator.classList.add('completed');
                    
                    console.log('Email envoyé avec succès à eduwelltn@gmail.com');
                } else {
                    // Even if email fails, show success to user (for demo purposes)
                    // In production, you might want to show an error
                    console.warn('Problème d\'envoi d\'email, mais on montre le succès à l\'utilisateur:', result.message);
                    
                    loadingMessage.classList.remove('active');
                    successMessage.classList.add('active');
                    step3Indicator.classList.remove('active');
                    step3Indicator.classList.add('completed');
                    
                    // Update success message slightly
                    document.querySelector('.success-text').textContent = 
                        'Votre demande a été enregistrée. Nous vous contacterons bientôt.';
                }
                
            } catch (error) {
                console.error('Erreur lors de l\'envoi:', error);
                
                // Show error message to user
                loadingMessage.classList.remove('active');
                
                // Create and show error message
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #e74c3c;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 40px; margin-bottom: 15px;"></i>
                        <h3 style="margin-bottom: 10px;">Erreur d'envoi</h3>
                        <p>Il y a eu un problème lors de l'envoi de votre formulaire. Veuillez réessayer.</p>
                        <button id="retryButton" style="margin-top: 20px; padding: 10px 20px; background-color: #000; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Réessayer
                        </button>
                    </div>
                `;
                
                // Replace loading message with error
                loadingMessage.parentNode.replaceChild(errorDiv, loadingMessage);
                
                // Add retry button functionality
                document.getElementById('retryButton').addEventListener('click', () => {
                    // Go back to step 3
                    errorDiv.remove();
                    step3.classList.add('active');
                });
            }
        });
        
        // Real-time validation for WhatsApp input
        const whatsappInput = document.getElementById('whatsapp');
        whatsappInput.addEventListener('input', function() {
            const value = this.value.trim();
            const errorElement = document.getElementById('whatsappError');
            
            if (!value) {
                this.classList.remove('error', 'success');
                errorElement.classList.remove('show');
                return;
            }
            
            if (isValidWhatsAppNumber(value)) {
                this.classList.remove('error');
                this.classList.add('success');
                errorElement.classList.remove('show');
            } else {
                this.classList.add('error');
                this.classList.remove('success');
                errorElement.textContent = 'Numéro WhatsApp invalide. Doit commencer par 2, 4, 5 ou 9 et avoir au moins 8 chiffres';
                errorElement.classList.add('show');
            }
        });
        
        // Real-time validation for grade inputs
        const gradeInputs = ['mathNote', 'physicsNote', 'scienceNote', 'englishNote', 'informaticsNote'];
        gradeInputs.forEach(inputId => {
            const input = document.getElementById(inputId);
            input.addEventListener('input', function() {
                const value = this.value.trim();
                const errorElement = document.getElementById(`${inputId}Error`);
                
                if (!value) {
                    this.classList.remove('error', 'success');
                    errorElement.classList.remove('show');
                    return;
                }
                
                // Allow only numbers and decimal point
                const sanitizedValue = value.replace(/[^0-9.]/g, '');
                
                // Remove extra decimal points
                const parts = sanitizedValue.split('.');
                if (parts.length > 2) {
                    this.value = parts[0] + '.' + parts.slice(1).join('');
                } else {
                    this.value = sanitizedValue;
                }
                
                if (isValidGrade(this.value)) {
                    this.classList.remove('error');
                    this.classList.add('success');
                    errorElement.classList.remove('show');
                } else {
                    this.classList.add('error');
                    this.classList.remove('success');
                    errorElement.textContent = 'Veuillez entrer une note valide entre 0 et 20';
                    errorElement.classList.add('show');
                }
            });
        });
        
        // Add hover effect to subjects
        const subjects = document.querySelectorAll('.subject');
        subjects.forEach(subject => {
            subject.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            subject.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>
