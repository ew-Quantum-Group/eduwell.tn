<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STI Mastery · Évaluation des Compétences</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="shortcut icon" href="./assets/images/logoo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" />
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;450;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --background: #fcfcfd;
            --surface-primary: #ffffff;
            --surface-secondary: #f8f9fc;
            --surface-tertiary: #f1f3f9;
            --text-primary: #1a1d29;
            --text-secondary: #5a6072;
            --text-tertiary: #8c94a8;
            --border-light: #e4e7f1;
            --border-medium: #d0d5e2;
            --accent-primary: #2563eb;
            --accent-primary-hover: #1d4ed8;
            --accent-success: #059669;
            --accent-error: #dc2626;
            --accent-warning: #d97706;
            --shadow-subtle: 0 1px 3px rgba(16, 24, 40, 0.05);
            --shadow-elevated: 0 8px 24px rgba(16, 24, 40, 0.08);
            --shadow-floating: 0 12px 32px rgba(16, 24, 40, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--background);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.5;
            min-height: 100vh;
        }

        /* === Typography System === */
        .display-1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 3.5rem;
            font-weight: 600;
            line-height: 1.1;
            letter-spacing: -0.02em;
        }

        .display-2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            font-weight: 600;
            line-height: 1.2;
            letter-spacing: -0.01em;
        }

        .heading-1 {
            font-size: 2rem;
            font-weight: 600;
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        .heading-2 {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.4;
        }

        .heading-3 {
            font-size: 1.25rem;
            font-weight: 600;
            line-height: 1.5;
        }

        .body-large {
            font-size: 1.125rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .body-medium {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .body-small {
            font-size: 0.875rem;
            line-height: 1.5;
            color: var(--text-tertiary);
        }

        .label {
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1.4;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-tertiary);
        }

        .mono {
            font-family: 'JetBrains Mono', 'SF Mono', monospace;
            font-size: 0.875rem;
        }

        /* === Layout & Structure === */
        .container-advanced {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section-spacing {
            padding: 4rem 0;
        }

        @media (max-width: 768px) {
            .container-advanced {
                padding: 0 1.5rem;
            }
            
            .section-spacing {
                padding: 3rem 0;
            }
            
            .display-1 {
                font-size: 2.75rem;
            }
            
            .display-2 {
                font-size: 2rem;
            }
        }

        /* === Surface Components === */
        .card {
            background: var(--surface-primary);
            border: 1px solid var(--border-light);
            border-radius: 20px;
            box-shadow: var(--shadow-subtle);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border-light), transparent);
        }

        .card-hover:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-floating);
            border-color: var(--border-medium);
        }

        .card-padding {
            padding: 3rem;
        }

        @media (max-width: 768px) {
            .card-padding {
                padding: 2rem 1.5rem;
            }
        }

        /* === Button System === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            border-radius: 12px;
            font-size: 0.9375rem;
            font-weight: 500;
            line-height: 1.5;
            border: none;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            user-select: none;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        .btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .btn-secondary {
            background: var(--surface-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        .btn-secondary:hover {
            background: var(--surface-tertiary);
            border-color: var(--border-medium);
            transform: translateY(-2px);
        }

        .btn-tertiary {
            background: transparent;
            color: var(--text-secondary);
            padding: 0.75rem 1rem;
        }

        .btn-tertiary:hover {
            color: var(--text-primary);
            background: var(--surface-tertiary);
        }

        /* === Selection Components === */
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .selection-card {
            background: var(--surface-primary);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .selection-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-primary);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .selection-card:hover {
            transform: translateY(-3px);
            border-color: var(--border-medium);
            box-shadow: var(--shadow-elevated);
        }

        .selection-card.selected {
            border-color: var(--accent-primary);
            background: linear-gradient(to bottom, rgba(37, 99, 235, 0.02), transparent);
        }

        .selection-card.selected::before {
            transform: scaleX(1);
        }

        .selection-icon {
            width: 48px;
            height: 48px;
            background: var(--surface-secondary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: var(--accent-primary);
            font-size: 1.25rem;
            transition: all 0.3s ease;
        }

        .selection-card.selected .selection-icon {
            background: rgba(37, 99, 235, 0.1);
            color: var(--accent-primary);
            transform: scale(1.1);
        }

        /* === Progress & Status === */
        .progress-track {
            height: 6px;
            background: var(--surface-tertiary);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), #60a5fa);
            border-radius: 3px;
            transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: var(--surface-secondary);
            border: 1px solid var(--border-light);
            border-radius: 100px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .status-badge-theme {
            background: linear-gradient(to right, rgba(37, 99, 235, 0.1), rgba(37, 99, 235, 0.05));
            border-color: rgba(37, 99, 235, 0.2);
            color: var(--accent-primary);
        }

        /* === Loading Screen (FIXED) === */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s;
        }

        .loading-container {
            text-align: center;
        }

        .loader {
            width: 64px;
            height: 64px;
            border: 2px solid transparent;
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            position: relative;
            margin-bottom: 1.5rem;
        }

        .loader::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid transparent;
            border-top-color: rgba(37, 99, 235, 0.3);
            border-radius: 50%;
            animation: spin 1.5s linear infinite reverse;
        }

        .loading-text {
            font-size: 0.875rem;
            color: var(--text-tertiary);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            animation: pulse 2s infinite;
        }

        .loading-dots {
            display: inline-flex;
            gap: 0.25rem;
        }

        .loading-dots span {
            width: 4px;
            height: 4px;
            background: var(--text-tertiary);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

        /* === Animations === */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        @keyframes slideInRight {
            from { 
                opacity: 0; 
                transform: translateX(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        @keyframes scaleIn {
            from { 
                opacity: 0; 
                transform: scale(0.9); 
            }
            to { 
                opacity: 1; 
                transform: scale(1); 
            }
        }

        @keyframes bounce {
            0%, 80%, 100% { 
                transform: scale(0);
                opacity: 0.5;
            }
            40% { 
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            20% {
                transform: scale(25, 25);
                opacity: 0.3;
            }
            100% {
                opacity: 0;
                transform: scale(40, 40);
            }
        }

        @keyframes checkmark {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* === Utility Classes === */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .space-y-4 > * + * {
            margin-top: 1rem;
        }

        .space-y-6 > * + * {
            margin-top: 1.5rem;
        }

        .space-y-8 > * + * {
            margin-top: 2rem;
        }

        .grid-responsive {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        /* === Navigation Components === */
        .navigation-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 2rem;
            animation: fadeIn 0.4s ease;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-primary), #60a5fa);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .nav-controls {
            display: flex;
            gap: 0.75rem;
        }

        /* === Footer === */
        .footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 4rem;
            border-top: 1px solid var(--border-light);
            color: var(--text-tertiary);
            font-size: 0.875rem;
            animation: fadeIn 0.4s ease;
        }

        /* === Responsive Adjustments === */
        @media (max-width: 640px) {
            .selection-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .question-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .timer-display {
                align-self: flex-start;
            }
        }

        /* === Smooth Scrolling === */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <!-- Loading Screen (FIXED) -->
    <div id="loading-screen">
        <div class="loading-container">
            <div class="loader"></div>
            <div class="loading-text">
                Chargement
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <main class="section-spacing">
        <div class="container-advanced">
            <!-- Navigation Bar -->
            <div class="navigation-bar hidden" id="nav-bar">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="heading-3" style="color: var(--accent-primary);">STI Mastery</div>
                </div>
                <div class="nav-controls">
                    <button class="btn btn-tertiary" id="nav-home">
                        <i class="fas fa-home"></i>
                        Accueil
                    </button>
                </div>
            </div>

            <!-- Home Screen -->
            <section id="home-screen" class="hidden fade-in-up">
                <div class="text-center space-y-6">
                    <div class="label">Évaluation des Compétences</div>
                    <h1 class="display-1">STI <span style="color: var(--accent-primary);">Mastery</span></h1>
                    <p class="body-large max-w-2xl mx-auto">
                        Plateforme d'évaluation professionnelle pour mesurer et perfectionner 
                        votre maîtrise des Sciences de l'Informatique en 4ème année.
                    </p>
                </div>
                
                <div class="card card-hover mt-12">
                    <div class="card-padding">
                        <div class="text-center">
                            <div class="selection-icon mx-auto" style="background: rgba(37, 99, 235, 0.1);">
                                <i class="fas fa-clipboard-check" style="font-size: 1.5rem;"></i>
                            </div>
                            <h2 class="heading-2 mt-4">Nouvelle Évaluation</h2>
                            <p class="body-medium mt-2">
                                Créez un quiz personnalisé adapté à vos objectifs d'apprentissage.
                                Choisissez les thèmes, le niveau de difficulté et la durée.
                            </p>
                            <button id="start-config-btn" class="btn btn-primary mt-6">
                                <i class="fas fa-cogs"></i>
                                Configurer l'évaluation
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Features Grid -->
                <div class="grid-responsive mt-12">
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <h3 class="heading-3 mt-4">Bases de données</h3>
                        <p class="body-small mt-2">SQL, modélisation, optimisation</p>
                    </div>
                    
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3 class="heading-3 mt-4">Développement Web</h3>
                        <p class="body-small mt-2">HTML, CSS, JavaScript</p>
                    </div>
                    
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <h3 class="heading-3 mt-4">Backend</h3>
                        <p class="body-small mt-2">PHP, architecture, API</p>
                    </div>
                </div>
            </section>

            <!-- Configuration Screen -->
            <section id="config-screen" class="hidden fade-in-up">
                <div class="card">
                    <div class="card-padding">
                        <div class="space-y-2">
                            <div class="label">Étape 1/3</div>
                            <h2 class="heading-1">Configuration de l'évaluation</h2>
                            <p class="body-medium">
                                Personnalisez les paramètres pour créer un quiz adapté à vos besoins.
                            </p>
                        </div>

                        <div class="space-y-8 mt-8">
                            <!-- Domains Section -->
                            <div>
                                <h3 class="heading-3 mb-4">
                                    <i class="fas fa-layer-group"></i>
                                    Domaines de compétence
                                </h3>
                                <p class="body-small mb-4">Sélectionnez les domaines à évaluer (1 minimum)</p>
                                <div id="themes-container" class="selection-grid"></div>
                            </div>

                            <!-- Difficulty Section -->
                            <div>
                                <h3 class="heading-3 mb-4">
                                    <i class="fas fa-chart-line"></i>
                                    Niveau de difficulté
                                </h3>
                                <p class="body-small mb-4">Définissez le niveau de complexité des questions</p>
                                <div id="level-container" class="selection-grid"></div>
                            </div>

                            <!-- Duration Section -->
                            <div>
                                <h3 class="heading-3 mb-4">
                                    <i class="fas fa-clock"></i>
                                    Durée de l'évaluation
                                </h3>
                                <p class="body-small mb-4">Choisissez la longueur du quiz</p>
                                <div id="length-container" class="selection-grid"></div>
                            </div>
                        </div>

                        <div class="flex justify-between items-center mt-12 pt-6 border-t border-border-light">
                            <button class="btn btn-tertiary" id="config-back">
                                <i class="fas fa-arrow-left"></i>
                                Retour
                            </button>
                            <button id="start-quiz-btn" class="btn btn-primary" disabled>
                                <i class="fas fa-play"></i>
                                Démarrer l'évaluation
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quiz Screen -->
            <section id="quiz-screen" class="hidden">
                <div class="card">
                    <div class="card-padding">
                        <!-- Progress Section -->
                        <div class="question-header">
                            <div>
                                <div class="question-counter" id="progress-indicator">Question 1/20</div>
                                <div class="status-badge status-badge-theme mt-2" id="theme-badge">
                                    <i class="fas fa-tag"></i>
                                    <span id="theme-text">Chargement...</span>
                                </div>
                            </div>
                            <div class="timer-display" id="timer">
                                <i class="fas fa-clock"></i>
                                <span>00:00</span>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="progress-track">
                            <div id="progress-fill" class="progress-fill" style="width: 5%"></div>
                        </div>

                        <!-- Question Content -->
                        <div class="question-container">
                            <h2 id="question-text" class="heading-2"></h2>
                            <div id="options-container" class="option-list"></div>
                        </div>

                        <!-- Navigation -->
                        <div class="flex justify-between items-center pt-6 border-t border-border-light">
                            <div class="flex gap-2">
                                <button id="prev-btn" class="btn btn-tertiary" disabled>
                                    <i class="fas fa-arrow-left"></i>
                                    Précédent
                                </button>
                                <button id="skip-btn" class="btn btn-tertiary">
                                    Passer
                                    <i class="fas fa-forward"></i>
                                </button>
                            </div>
                            <button id="next-btn" class="btn btn-primary">
                                Suivant
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Screen -->
            <section id="results-screen" class="hidden fade-in-up">
                <div class="results-header">
                    <div class="label">Évaluation terminée</div>
                    <h2 class="display-2">Résultats</h2>
                    <p class="body-medium">Analyse détaillée de votre performance</p>
                </div>

                <div class="score-card">
                    <div class="text-center">
                        <div class="label" style="color: rgba(255, 255, 255, 0.8);">Score final</div>
                        <div id="final-score" class="score-value">0/20</div>
                        <div id="total-time" class="body-medium" style="color: rgba(255, 255, 255, 0.8);">
                            <i class="fas fa-clock"></i>
                            Temps total: 00:00
                        </div>
                    </div>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="metric-label">Précision</div>
                        <div id="accuracy" class="metric-value">0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="metric-label">Vitesse moyenne</div>
                        <div id="avg-speed" class="metric-value">0s</div>
                    </div>
                    <div class="metric-card">
                        <div class="selection-icon">
                            <i class="fas fa-fast-forward"></i>
                        </div>
                        <div class="metric-label">Questions sautées</div>
                        <div id="skipped-count" class="metric-value">0</div>
                    </div>
                </div>

                <div class="space-y-6">
                    <h3 class="heading-3">
                        <i class="fas fa-chart-pie"></i>
                        Performance par domaine
                    </h3>
                    <div id="theme-scores-container" class="grid-responsive"></div>
                </div>

                <div class="space-y-6 mt-8">
                    <h3 class="heading-3">
                        <i class="fas fa-lightbulb"></i>
                        Points à améliorer
                    </h3>
                    <div id="wrong-answers-list" class="space-y-4"></div>
                </div>

                <div class="flex gap-3 mt-12 pt-6 border-t border-border-light">
                    <button id="replay-btn" class="btn btn-primary flex-1">
                        <i class="fas fa-redo"></i>
                        Nouvelle évaluation
                    </button>
                    <button id="quit-btn" class="btn btn-secondary flex-1">
                        <i class="fas fa-home"></i>
                        Retour à l'accueil
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer hidden" id="footer">
        <div class="container-advanced">
            <div class="logo mx-auto" style="justify-content: center; margin-bottom: 1rem;">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="heading-3" style="color: var(--accent-primary);">STI Mastery</div>
            </div>
            <div class="body-small">Plateforme d'évaluation professionnelle</div>
            <div class="body-small mt-2">© 2024 Eduwell Quantum Group. Tous droits réservés.</div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // === State Management ===
            const state = {
                questions: [],
                currentQuiz: [],
                currentIndex: 0,
                userAnswers: new Map(),
                timer: { interval: null, seconds: 0 },
                config: { themes: [], level: 'mixte', length: 20 },
                performance: { startTime: null, skipped: 0 }
            };

            // === Configuration Data ===
            const CONFIG = {
                themes: [
                    { id: 'Bases de données', icon: 'fas fa-database', color: '#3b82f6' },
                    { id: 'HTML', icon: 'fab fa-html5', color: '#ef4444' },
                    { id: 'CSS', icon: 'fab fa-css3-alt', color: '#8b5cf6' },
                    { id: 'JavaScript', icon: 'fab fa-js-square', color: '#f59e0b' },
                    { id: 'PHP', icon: 'fab fa-php', color: '#6366f1' }
                ],
                levels: [
                    { id: 'mixte', label: 'Mixte', desc: 'Tous niveaux combinés', icon: 'fas fa-sliders-h' },
                    { id: 'debutant', label: 'Débutant', desc: 'Concepts fondamentaux', icon: 'fas fa-seedling' },
                    { id: 'intermediaire', label: 'Intermédiaire', desc: 'Applications pratiques', icon: 'fas fa-cogs' },
                    { id: 'avance', label: 'Avancé', desc: 'Expertise technique', icon: 'fas fa-rocket' }
                ],
                lengths: [
                    { id: 'courte', label: 'Courte', desc: '10 questions', value: 10, icon: 'fas fa-bolt' },
                    { id: 'moyenne', label: 'Moyenne', desc: '20 questions', value: 20, icon: 'fas fa-tasks' },
                    { id: 'longue', label: 'Longue', desc: '30 questions', value: 30, icon: 'fas fa-chart-line' }
                ]
            };

            // === UI Elements ===
            const elements = {
                screens: {
                    home: document.getElementById('home-screen'),
                    config: document.getElementById('config-screen'),
                    quiz: document.getElementById('quiz-screen'),
                    results: document.getElementById('results-screen')
                },
                containers: {
                    themes: document.getElementById('themes-container'),
                    levels: document.getElementById('level-container'),
                    length: document.getElementById('length-container'),
                    options: document.getElementById('options-container'),
                    themeScores: document.getElementById('theme-scores-container'),
                    wrongAnswers: document.getElementById('wrong-answers-list')
                },
                display: {
                    progress: document.getElementById('progress-indicator'),
                    progressFill: document.getElementById('progress-fill'),
                    question: document.getElementById('question-text'),
                    themeBadge: document.getElementById('theme-badge'),
                    themeText: document.getElementById('theme-text'),
                    timer: document.getElementById('timer'),
                    finalScore: document.getElementById('final-score'),
                    totalTime: document.getElementById('total-time'),
                    accuracy: document.getElementById('accuracy'),
                    avgSpeed: document.getElementById('avg-speed'),
                    skippedCount: document.getElementById('skipped-count')
                },
                buttons: {
                    startConfig: document.getElementById('start-config-btn'),
                    startQuiz: document.getElementById('start-quiz-btn'),
                    configBack: document.getElementById('config-back'),
                    prev: document.getElementById('prev-btn'),
                    next: document.getElementById('next-btn'),
                    skip: document.getElementById('skip-btn'),
                    replay: document.getElementById('replay-btn'),
                    quit: document.getElementById('quit-btn'),
                    navHome: document.getElementById('nav-home')
                },
                navigation: {
                    navBar: document.getElementById('nav-bar'),
                    footer: document.getElementById('footer')
                }
            };

            // === Core Functions ===
            const showScreen = (screenName) => {
                Object.values(elements.screens).forEach(screen => {
                    screen.classList.add('hidden');
                    screen.style.opacity = '0';
                    screen.style.transform = 'translateY(10px)';
                });
                
                const targetScreen = elements.screens[screenName];
                targetScreen.classList.remove('hidden');
                
                // Trigger reflow for animation
                setTimeout(() => {
                    targetScreen.style.opacity = '1';
                    targetScreen.style.transform = 'translateY(0)';
                    targetScreen.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                }, 10);
                
                // Show/hide navigation based on screen
                const showNav = screenName !== 'home';
                elements.navigation.navBar.classList.toggle('hidden', !showNav);
                elements.navigation.footer.classList.toggle('hidden', !showNav);
                
                if (showNav) {
                    setTimeout(() => {
                        elements.navigation.navBar.style.opacity = '1';
                        elements.navigation.navBar.style.transform = 'translateY(0)';
                        elements.navigation.footer.style.opacity = '1';
                        elements.navigation.footer.style.transform = 'translateY(0)';
                    }, 200);
                }
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                return `${mins}:${secs}`;
            };

            // === Initialization ===
            const init = () => {
                // Bind events first
                bindEvents();
                
                // Initialize configuration screen
                initConfigScreen();
                
                // Load with simulated data
                setTimeout(() => {
                    hideLoadingScreen();
                    showScreen('home');
                }, 1800);
            };

            const hideLoadingScreen = () => {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.style.opacity = '0';
                loadingScreen.style.visibility = 'hidden';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            };

            // === CORRECTION PRINCIPALE : Fonction corrigée pour la sélection des thèmes ===
            const initConfigScreen = () => {
                // Render themes
                elements.containers.themes.innerHTML = CONFIG.themes.map(theme => `
                    <div class="selection-card" data-theme="${theme.id}" data-selected="false">
                        <div class="selection-icon" style="color: ${theme.color}; background: ${theme.color}10;">
                            <i class="${theme.icon}"></i>
                        </div>
                        <h4 class="heading-3">${theme.id}</h4>
                        <p class="body-small mt-1">Questions spécialisées</p>
                    </div>
                `).join('');

                // Render levels
                elements.containers.levels.innerHTML = CONFIG.levels.map(level => `
                    <div class="selection-card" data-level="${level.id}">
                        <div class="selection-icon">
                            <i class="${level.icon}"></i>
                        </div>
                        <h4 class="heading-3">${level.label}</h4>
                        <p class="body-small mt-1">${level.desc}</p>
                    </div>
                `).join('');

                // Render lengths
                elements.containers.length.innerHTML = CONFIG.lengths.map(length => `
                    <div class="selection-card" data-length="${length.id}" data-value="${length.value}">
                        <div class="selection-icon">
                            <i class="${length.icon}"></i>
                        </div>
                        <h4 class="heading-3">${length.label}</h4>
                        <p class="body-small mt-1">${length.desc}</p>
                    </div>
                `).join('');

                // CORRECTION : Ajout d'event listeners spécifiques pour chaque type
                addSelectionCardListeners();
                
                // Set defaults
                setDefaultSelections();
            };

            // === CORRECTION : Fonction séparée pour gérer les événements ===
            const addSelectionCardListeners = () => {
                // Gestionnaires pour les thèmes (sélection multiple)
                document.querySelectorAll('.selection-card[data-theme]').forEach(card => {
                    card.addEventListener('click', (e) => {
                        e.stopPropagation();
                        handleThemeSelection(card);
                    });
                });

                // Gestionnaires pour les niveaux (sélection unique)
                document.querySelectorAll('.selection-card[data-level]').forEach(card => {
                    card.addEventListener('click', (e) => {
                        e.stopPropagation();
                        handleLevelSelection(card);
                    });
                });

                // Gestionnaires pour les durées (sélection unique)
                document.querySelectorAll('.selection-card[data-length]').forEach(card => {
                    card.addEventListener('click', (e) => {
                        e.stopPropagation();
                        handleLengthSelection(card);
                    });
                });
            };

            // === CORRECTION : Logique de sélection des thèmes corrigée ===
            const handleThemeSelection = (card) => {
                const isSelected = card.classList.contains('selected');
                const themeId = card.dataset.theme;
                
                // Animation de clic
                card.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 150);
                
                if (isSelected) {
                    // Désélection
                    card.classList.remove('selected');
                    card.dataset.selected = "false";
                    state.config.themes = state.config.themes.filter(t => t !== themeId);
                } else {
                    // Sélection
                    card.classList.add('selected');
                    card.dataset.selected = "true";
                    state.config.themes.push(themeId);
                }
                
                validateConfig();
                updateSelectionCount();
            };

            const handleLevelSelection = (card) => {
                // Désélectionner tous les niveaux
                document.querySelectorAll('.selection-card[data-level]').forEach(c => {
                    c.classList.remove('selected');
                    c.dataset.selected = "false";
                });
                
                // Sélectionner le niveau cliqué
                card.classList.add('selected');
                card.dataset.selected = "true";
                state.config.level = card.dataset.level;
                
                // Animation
                card.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 150);
                
                validateConfig();
            };

            const handleLengthSelection = (card) => {
                // Désélectionner toutes les durées
                document.querySelectorAll('.selection-card[data-length]').forEach(c => {
                    c.classList.remove('selected');
                    c.dataset.selected = "false";
                });
                
                // Sélectionner la durée cliquée
                card.classList.add('selected');
                card.dataset.selected = "true";
                state.config.length = parseInt(card.dataset.value);
                
                // Animation
                card.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 150);
                
                validateConfig();
            };

            const updateSelectionCount = () => {
                const selectedCount = document.querySelectorAll('.selection-card[data-theme].selected').length;
                const themeLabel = document.querySelector('h3:has(i.fa-layer-group)');
                if (themeLabel) {
                    const countSpan = themeLabel.querySelector('.selection-count') || 
                        (() => {
                            const span = document.createElement('span');
                            span.className = 'selection-count body-small';
                            span.style.marginLeft = '0.5rem';
                            span.style.color = 'var(--accent-primary)';
                            themeLabel.appendChild(span);
                            return span;
                        })();
                    countSpan.textContent = `(${selectedCount} sélectionné${selectedCount > 1 ? 's' : ''})`;
                }
            };

            const setDefaultSelections = () => {
                // Sélectionner le premier thème par défaut
                const firstThemeCard = document.querySelector('.selection-card[data-theme]');
                if (firstThemeCard) {
                    firstThemeCard.click();
                }
                
                // Sélectionner le niveau mixte par défaut
                const mixteCard = document.querySelector('.selection-card[data-level="mixte"]');
                if (mixteCard) {
                    mixteCard.click();
                }
                
                // Sélectionner la durée moyenne par défaut
                const moyenneCard = document.querySelector('.selection-card[data-length="moyenne"]');
                if (moyenneCard) {
                    moyenneCard.click();
                }
            };

            const validateConfig = () => {
                const isValid = state.config.themes.length > 0;
                const startBtn = elements.buttons.startQuiz;
                startBtn.disabled = !isValid;
                
                if (isValid) {
                    startBtn.style.opacity = '1';
                    startBtn.style.transform = 'scale(1)';
                    startBtn.style.cursor = 'pointer';
                } else {
                    startBtn.style.opacity = '0.6';
                    startBtn.style.transform = 'scale(0.98)';
                    startBtn.style.cursor = 'not-allowed';
                }
                
                // Mettre à jour le compteur de sélection
                updateSelectionCount();
            };

            // === Quiz Functions ===
            const startQuiz = () => {
                // Validation finale
                if (state.config.themes.length === 0) {
                    alert('Veuillez sélectionner au moins un thème.');
                    return;
                }
                
                generateSampleQuestions();
                state.currentIndex = 0;
                state.userAnswers.clear();
                state.performance.startTime = Date.now();
                state.performance.skipped = 0;
                
                showScreen('quiz');
                startTimer();
                displayQuestion();
            };

            const generateSampleQuestions = () => {
                const sampleQuestions = [
                    {
                        id: 1,
                        theme: 'HTML',
                        question: 'Quelle balise HTML5 est utilisée pour définir un contenu autonome et indépendant ?',
                        type: 'choix_simple',
                        options: ['&lt;article&gt;', '&lt;section&gt;', '&lt;div&gt;', '&lt;aside&gt;'],
                        reponse: ['&lt;article&gt;'],
                        explication: 'La balise &lt;article&gt; est utilisée pour du contenu autonome qui pourrait être distribué indépendamment.'
                    },
                    {
                        id: 2,
                        theme: 'CSS',
                        question: 'Quelle propriété CSS utilise-t-on pour créer un effet de transition fluide ?',
                        type: 'choix_simple',
                        options: ['transition', 'animation', 'transform', 'keyframes'],
                        reponse: ['transition'],
                        explication: 'La propriété transition permet de créer des animations fluides entre deux états.'
                    },
                    {
                        id: 3,
                        theme: 'JavaScript',
                        question: 'Quelle méthode utilise-t-on pour convertir une chaîne JSON en objet JavaScript ?',
                        type: 'choix_simple',
                        options: ['JSON.parse()', 'JSON.stringify()', 'JSON.convert()', 'JSON.decode()'],
                        reponse: ['JSON.parse()'],
                        explication: 'JSON.parse() convertit une chaîne JSON en objet JavaScript.'
                    },
                    {
                        id: 4,
                        theme: 'PHP',
                        question: 'Quelle fonction PHP utilise-t-on pour se connecter à une base de données MySQL ?',
                        type: 'choix_simple',
                        options: ['mysqli_connect()', 'mysql_connect()', 'pdo_connect()', 'db_connect()'],
                        reponse: ['mysqli_connect()'],
                        explication: 'mysqli_connect() est la fonction recommandée pour se connecter à MySQL en PHP.'
                    },
                    {
                        id: 5,
                        theme: 'Bases de données',
                        question: 'Quelle clause SQL utilise-t-on pour regrouper des lignes ayant des valeurs identiques ?',
                        type: 'choix_simple',
                        options: ['GROUP BY', 'ORDER BY', 'HAVING', 'WHERE'],
                        reponse: ['GROUP BY'],
                        explication: 'GROUP BY regroupe les lignes qui ont les mêmes valeurs dans les colonnes spécifiées.'
                    }
                ];

                // Filtrer et générer des questions basées sur les thèmes sélectionnés
                const questionsNeeded = state.config.length;
                state.currentQuiz = [];
                
                // Filtrer les questions par thèmes sélectionnés
                const filteredQuestions = sampleQuestions.filter(q => 
                    state.config.themes.includes(q.theme)
                );
                
                // Si aucun thème correspondant, utiliser toutes les questions
                const availableQuestions = filteredQuestions.length > 0 ? filteredQuestions : sampleQuestions;
                
                // Générer le nombre requis de questions
                for (let i = 0; i < questionsNeeded; i++) {
                    const originalQuestion = availableQuestions[i % availableQuestions.length];
                    const questionCopy = {
                        ...originalQuestion,
                        id: i + 1
                    };
                    state.currentQuiz.push(questionCopy);
                }
                
                console.log(`Quiz généré: ${state.currentQuiz.length} questions`);
            };

            const displayQuestion = () => {
                const question = state.currentQuiz[state.currentIndex];
                if (!question) return;

                // Update progress with smooth animation
                const progressPercentage = ((state.currentIndex + 1) / state.currentQuiz.length) * 100;
                elements.display.progressFill.style.width = `${progressPercentage}%`;
                
                elements.display.progress.textContent = 
                    `Question ${state.currentIndex + 1}/${state.currentQuiz.length}`;

                // Update theme with animation
                elements.display.themeText.textContent = question.theme;
                elements.display.themeBadge.style.opacity = '0.8';
                setTimeout(() => {
                    elements.display.themeBadge.style.opacity = '1';
                }, 150);

                // Update question with fade effect
                elements.display.question.style.opacity = '0';
                elements.display.question.innerHTML = question.question;
                setTimeout(() => {
                    elements.display.question.style.opacity = '1';
                    elements.display.question.style.transition = 'opacity 0.3s ease';
                }, 100);

                // Update options
                elements.containers.options.innerHTML = question.options.map((option, idx) => {
                    const isSelected = state.userAnswers.has(question.id) && 
                                      state.userAnswers.get(question.id).includes(option);
                    return `
                        <div class="option-item ${isSelected ? 'selected' : ''}" data-index="${idx}" style="opacity: 0; transform: translateX(-10px);">
                            <div class="option-indicator"></div>
                            <div class="body-medium">${option}</div>
                        </div>
                    `;
                }).join('');

                // Animate options in
                setTimeout(() => {
                    document.querySelectorAll('.option-item').forEach((item, index) => {
                        setTimeout(() => {
                            item.style.opacity = '1';
                            item.style.transform = 'translateX(0)';
                            item.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                        }, index * 50);
                    });
                }, 200);

                // Add option handlers
                document.querySelectorAll('.option-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const optionIndex = parseInt(item.dataset.index);
                        const optionText = question.options[optionIndex];
                        
                        if (question.type === 'choix_simple') {
                            document.querySelectorAll('.option-item').forEach(opt => 
                                opt.classList.remove('selected'));
                        }
                        
                        item.classList.toggle('selected');
                        
                        // Update state
                        const currentAnswers = state.userAnswers.get(question.id) || [];
                        if (item.classList.contains('selected')) {
                            if (question.type === 'choix_simple') {
                                state.userAnswers.set(question.id, [optionText]);
                            } else {
                                state.userAnswers.set(question.id, [...currentAnswers, optionText]);
                            }
                        } else {
                            state.userAnswers.set(question.id, 
                                currentAnswers.filter(ans => ans !== optionText));
                        }
                    });
                });

                // Update navigation
                updateNavigation();
            };

            const updateNavigation = () => {
                elements.buttons.prev.disabled = state.currentIndex === 0;
                elements.buttons.prev.style.opacity = state.currentIndex === 0 ? '0.5' : '1';
                
                if (state.currentIndex === state.currentQuiz.length - 1) {
                    elements.buttons.next.innerHTML = `
                        <i class="fas fa-check"></i>
                        Terminer
                    `;
                } else {
                    elements.buttons.next.innerHTML = `
                        Suivant
                        <i class="fas fa-arrow-right"></i>
                    `;
                }
            };

            const startTimer = () => {
                state.timer.seconds = 0;
                elements.display.timer.innerHTML = `
                    <i class="fas fa-clock"></i>
                    <span>${formatTime(0)}</span>
                `;
                
                state.timer.interval = setInterval(() => {
                    state.timer.seconds++;
                    const timerElement = elements.display.timer.querySelector('span');
                    timerElement.textContent = formatTime(state.timer.seconds);
                    
                    // Add warning style after 5 minutes
                    if (state.timer.seconds > 300) {
                        elements.display.timer.classList.add('warning');
                    }
                }, 1000);
            };

            const stopTimer = () => {
                clearInterval(state.timer.interval);
                elements.display.timer.classList.remove('warning');
            };

            const nextQuestion = () => {
                // Add transition effect
                document.querySelector('.card').style.opacity = '0.8';
                document.querySelector('.card').style.transform = 'translateX(-10px)';
                
                setTimeout(() => {
                    if (state.currentIndex < state.currentQuiz.length - 1) {
                        state.currentIndex++;
                        displayQuestion();
                    } else {
                        showResults();
                    }
                    
                    document.querySelector('.card').style.opacity = '1';
                    document.querySelector('.card').style.transform = 'translateX(0)';
                    document.querySelector('.card').style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                }, 200);
            };

            const prevQuestion = () => {
                if (state.currentIndex > 0) {
                    state.currentIndex--;
                    displayQuestion();
                }
            };

            const skipQuestion = () => {
                state.performance.skipped++;
                nextQuestion();
            };

            // === Results Functions ===
            const showResults = () => {
                stopTimer();
                showScreen('results');
                
                // Calculate metrics
                const total = state.currentQuiz.length;
                let correct = 0;
                
                state.currentQuiz.forEach(q => {
                    const userAnswer = state.userAnswers.get(q.id) || [];
                    if (arraysEqual(userAnswer.sort(), q.reponse.sort())) {
                        correct++;
                    }
                });
                
                const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
                const avgTime = total > 0 ? Math.round(state.timer.seconds / total) : 0;
                
                // Animate score display
                setTimeout(() => {
                    elements.display.finalScore.textContent = `${correct}/${total}`;
                    elements.display.totalTime.innerHTML = `
                        <i class="fas fa-clock"></i>
                        Temps total: ${formatTime(state.timer.seconds)}
                    `;
                    elements.display.accuracy.textContent = `${accuracy}%`;
                    elements.display.avgSpeed.textContent = `${avgTime}s`;
                    elements.display.skippedCount.textContent = state.performance.skipped;
                }, 300);
                
                // Generate theme scores
                renderThemeScores();
                
                // Generate review items
                renderReviewItems();
            };

            const renderThemeScores = () => {
                const themeStats = {};
                state.config.themes.forEach(theme => {
                    themeStats[theme] = { correct: 0, total: 0 };
                });
                
                state.currentQuiz.forEach(q => {
                    if (themeStats[q.theme]) {
                        themeStats[q.theme].total++;
                        const userAnswer = state.userAnswers.get(q.id) || [];
                        if (arraysEqual(userAnswer.sort(), q.reponse.sort())) {
                            themeStats[q.theme].correct++;
                        }
                    }
                });
                
                elements.containers.themeScores.innerHTML = Object.entries(themeStats).map(([theme, stats], index) => {
                    const percentage = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
                    const themeConfig = CONFIG.themes.find(t => t.id === theme);
                    return `
                        <div class="metric-card" style="animation-delay: ${index * 100}ms;">
                            <div class="selection-icon">
                                <i class="${themeConfig?.icon || 'fas fa-question'}"></i>
                            </div>
                            <div class="metric-label">${theme}</div>
                            <div class="metric-value">${stats.correct}/${stats.total}</div>
                            <div class="body-small mt-2">${percentage}% de précision</div>
                        </div>
                    `;
                }).join('');
            };

            const renderReviewItems = () => {
                const wrongQuestions = state.currentQuiz.filter(q => {
                    const userAnswer = state.userAnswers.get(q.id) || [];
                    return !arraysEqual(userAnswer.sort(), q.reponse.sort());
                }).slice(0, 3);
                
                if (wrongQuestions.length === 0) {
                    elements.containers.wrongAnswers.innerHTML = `
                        <div class="review-item">
                            <h4 class="heading-3">Excellent travail !</h4>
                            <p class="body-medium mt-2">Vous avez répondu correctement à toutes les questions.</p>
                        </div>
                    `;
                    return;
                }
                
                elements.containers.wrongAnswers.innerHTML = wrongQuestions.map((q, index) => `
                    <div class="review-item incorrect" style="animation-delay: ${index * 150}ms;">
                        <h4 class="heading-3">${q.question}</h4>
                        <p class="body-medium mt-2">
                            <strong>Réponse attendue :</strong> ${q.reponse.join(', ')}
                        </p>
                        ${q.explication ? `<p class="body-small mt-2">${q.explication}</p>` : ''}
                    </div>
                `).join('');
            };

            const arraysEqual = (a, b) => {
                if (a.length !== b.length) return false;
                return a.every((val, idx) => val === b[idx]);
            };

            // === Event Binding ===
            const bindEvents = () => {
                // Home screen
                elements.buttons.startConfig.addEventListener('click', () => {
                    elements.buttons.startConfig.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        elements.buttons.startConfig.style.transform = 'scale(1)';
                        showScreen('config');
                    }, 150);
                });
                
                // Config screen
                elements.buttons.configBack.addEventListener('click', () => showScreen('home'));
                elements.buttons.startQuiz.addEventListener('click', startQuiz);
                
                // Quiz screen
                elements.buttons.prev.addEventListener('click', prevQuestion);
                elements.buttons.next.addEventListener('click', nextQuestion);
                elements.buttons.skip.addEventListener('click', skipQuestion);
                
                // Results screen
                elements.buttons.replay.addEventListener('click', () => {
                    elements.buttons.replay.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        elements.buttons.replay.style.transform = 'scale(1)';
                        initConfigScreen();
                        showScreen('config');
                    }, 150);
                });
                elements.buttons.quit.addEventListener('click', () => showScreen('home'));
                
                // Navigation
                elements.buttons.navHome.addEventListener('click', () => showScreen('home'));
            };

            // === Initialize ===
            init();
        });
    </script>
</body>
</html>
