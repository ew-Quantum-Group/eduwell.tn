<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Sahl – Learn Effortlessly</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>

/* ═══════════════════════════════════════════════
   DESIGN TOKENS
═══════════════════════════════════════════════ */
:root {
  --bg:           #f8f6f2;
  --bg-card:      #ffffff;
  --bg-soft:      #f2efe8;
  --bg-mid:       #ebe7dd;
  --bg-hover:     #e4dfd3;

  --violet:       #5340d6;
  --violet-2:     #7060e8;
  --violet-3:     #9b8ef7;
  --violet-tint:  #eeebff;
  --violet-ghost: rgba(83,64,214,0.06);
  --violet-border:rgba(83,64,214,0.16);

  --ink:          #0e0c1a;
  --ink-2:        #38354e;
  --ink-3:        #706d88;
  --ink-4:        #aeabc4;

  --gold:         #d4891a;
  --gold-bg:      #fff7eb;
  --teal:         #0ea896;
  --teal-bg:      #e8faf8;
  --rose:         #d93d5a;
  --rose-bg:      #fff0f3;
  --sky:          #2476d4;
  --sky-bg:       #eef5ff;

  --border:       rgba(14,12,26,0.07);
  --border-md:    rgba(14,12,26,0.11);
  --border-strong:rgba(83,64,214,0.18);

  --shadow-xs:    0 1px 3px rgba(14,12,26,0.05);
  --shadow-sm:    0 3px 14px rgba(14,12,26,0.06);
  --shadow-md:    0 8px 30px rgba(83,64,214,0.10);
  --shadow-lg:    0 18px 54px rgba(83,64,214,0.14);
  --shadow-xl:    0 30px 80px rgba(14,12,26,0.18);
  --shadow-notif: 0 24px 64px rgba(14,12,26,0.22);

  --r-xs: 5px;
  --r-sm: 9px;
  --r-md: 13px;
  --r-lg: 18px;
  --r-xl: 24px;
  --r-2xl:32px;

  --ease:   cubic-bezier(.4,0,.2,1);
  --spring: cubic-bezier(.34,1.56,.64,1);
  --t:      0.26s;

  --nav-h: 66px;
  --mob-bar: 68px;
}

/* ═══════════════════════════════════════════════
   RESET
═══════════════════════════════════════════════ */
*,*::before,*::after { box-sizing:border-box; margin:0; padding:0; }
html { scroll-behavior:smooth; }
body {
  font-family:'Sora',sans-serif;
  background:var(--bg);
  color:var(--ink);
  overflow-x:hidden;
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
}
a { text-decoration:none; color:inherit; }
button { cursor:pointer; border:none; background:none; font-family:inherit; -webkit-tap-highlight-color:transparent; }
::-webkit-scrollbar { width:4px; height:4px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border-strong); border-radius:10px; }

/* ═══════════════════════════════════════════════
   NAVBAR
═══════════════════════════════════════════════ */
.nav {
  position:sticky; top:0; z-index:900;
  height:var(--nav-h);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 clamp(1rem,4vw,2.2rem);
  background:rgba(248,246,242,0.92);
  backdrop-filter:blur(28px) saturate(1.6);
  -webkit-backdrop-filter:blur(28px) saturate(1.6);
  border-bottom:1px solid var(--border);
}

.nav-brand { display:flex; align-items:center; gap:10px; }
.nav-logo {
  width:38px; height:38px; border-radius:11px;
  background:linear-gradient(145deg,var(--violet),var(--violet-2));
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 14px rgba(83,64,214,.32);
  transition:transform .38s var(--spring);
  flex-shrink:0;
}
.nav-brand:hover .nav-logo { transform:rotate(-8deg) scale(1.08); }
.nav-name {
  font-family:'Instrument Serif',serif;
  font-size:1.5rem; font-weight:400; color:var(--ink);
  letter-spacing:-.2px;
}
.nav-name b { color:var(--violet); font-weight:400; }

/* Desktop pill tabs */
.nav-tabs {
  display:flex; align-items:center; gap:2px;
  background:var(--bg-soft); border:1px solid var(--border);
  border-radius:var(--r-2xl); padding:4px;
}
.nav-tab {
  display:flex; align-items:center; gap:6px;
  padding:7px 16px; border-radius:22px;
  font-size:.82rem; font-weight:600; color:var(--ink-3);
  transition:all .2s;
}
.nav-tab:hover { color:var(--ink-2); background:rgba(255,255,255,.6); }
.nav-tab.active {
  color:var(--violet); background:var(--bg-card);
  box-shadow:var(--shadow-xs);
}

/* Nav right */
.nav-right { display:flex; align-items:center; gap:8px; }

.nav-icon-btn {
  position:relative;
  width:38px; height:38px; border-radius:var(--r-sm);
  display:flex; align-items:center; justify-content:center;
  color:var(--ink-3); background:var(--bg-soft);
  border:1px solid var(--border); transition:all .2s;
}
.nav-icon-btn:hover { color:var(--violet); border-color:var(--violet-border); background:var(--violet-ghost); }
.nav-icon-btn.active-notif { color:var(--violet); border-color:var(--violet-border); background:var(--violet-tint); }

.notif-badge {
  position:absolute; top:-4px; right:-4px;
  min-width:18px; height:18px; border-radius:9px;
  background:var(--rose); color:#fff;
  font-size:.6rem; font-weight:700;
  display:flex; align-items:center; justify-content:center;
  border:2px solid var(--bg);
  padding:0 4px;
  animation:badge-pop .3s var(--spring);
}
@keyframes badge-pop { 0%{transform:scale(0)} 100%{transform:scale(1)} }

.nav-avatar {
  width:38px; height:38px; border-radius:var(--r-sm);
  background:linear-gradient(145deg,var(--violet-tint),#ddd6ff);
  border:2px solid var(--violet-border);
  display:flex; align-items:center; justify-content:center;
  font-size:.75rem; font-weight:700; color:var(--violet);
  cursor:pointer; transition:all .2s;
  overflow:hidden;
}
.nav-avatar:hover { border-color:var(--violet); box-shadow:0 0 0 3px var(--violet-ghost); }

/* Burger */
.burger {
  display:none;
  width:40px; height:40px; border-radius:var(--r-sm);
  background:var(--bg-soft); border:1px solid var(--border);
  flex-direction:column; align-items:center; justify-content:center; gap:5px;
  transition:all .2s;
}
.burger:hover { border-color:var(--violet-border); }
.burger span { display:block; border-radius:2px; background:var(--ink-2); transition:all .3s var(--ease); }
.burger span:nth-child(1) { width:18px; height:1.8px; }
.burger span:nth-child(2) { width:14px; height:1.8px; }
.burger span:nth-child(3) { width:18px; height:1.8px; }
.burger.open span:nth-child(1) { transform:translateY(6.8px) rotate(45deg); }
.burger.open span:nth-child(2) { opacity:0; transform:scaleX(0); }
.burger.open span:nth-child(3) { transform:translateY(-6.8px) rotate(-45deg); }

/* ═══════════════════════════════════════════════
   NOTIFICATION PANEL
═══════════════════════════════════════════════ */
.notif-panel {
  position:fixed;
  top:calc(var(--nav-h) + 10px);
  right:clamp(1rem,3vw,2rem);
  width:min(390px,94vw);
  background:var(--bg-card);
  border:1px solid var(--border-md);
  border-radius:var(--r-xl);
  box-shadow:var(--shadow-notif);
  z-index:890;
  overflow:hidden;
  transform:translateY(-12px) scale(.97);
  transform-origin:top right;
  opacity:0; pointer-events:none;
  transition:transform .32s var(--spring), opacity .28s var(--ease);
}
.notif-panel.open {
  transform:translateY(0) scale(1);
  opacity:1; pointer-events:all;
}

.notif-panel-hdr {
  display:flex; align-items:center; justify-content:space-between;
  padding:1.1rem 1.3rem .9rem;
  border-bottom:1px solid var(--border);
}
.notif-panel-title {
  font-size:.92rem; font-weight:700; color:var(--ink);
  display:flex; align-items:center; gap:8px;
}
.notif-panel-count {
  background:var(--rose); color:#fff;
  font-size:.62rem; font-weight:700;
  padding:2px 7px; border-radius:12px;
}
.notif-mark-all {
  font-size:.75rem; color:var(--violet); font-weight:600;
  padding:4px 10px; border-radius:var(--r-sm);
  transition:background .2s;
}
.notif-mark-all:hover { background:var(--violet-ghost); }

.notif-tabs {
  display:flex; gap:0;
  padding:.7rem 1.3rem .4rem;
  border-bottom:1px solid var(--border);
}
.notif-tab-btn {
  font-size:.76rem; font-weight:600; color:var(--ink-3);
  padding:5px 12px; border-radius:var(--r-sm);
  transition:all .2s;
}
.notif-tab-btn.active { color:var(--violet); background:var(--violet-ghost); }

.notif-list { max-height:360px; overflow-y:auto; }

.notif-item {
  display:flex; gap:11px;
  padding:.95rem 1.3rem;
  border-bottom:1px solid var(--border);
  transition:background .18s; cursor:pointer;
  position:relative;
}
.notif-item:last-child { border-bottom:none; }
.notif-item:hover { background:var(--bg-soft); }
.notif-item.unread { background:var(--violet-ghost); }
.notif-item.unread:hover { background:rgba(83,64,214,.09); }
.notif-unread-dot {
  position:absolute; right:1.3rem; top:50%;
  transform:translateY(-50%);
  width:7px; height:7px; border-radius:50%;
  background:var(--violet);
}

.notif-icon-wrap {
  width:40px; height:40px; border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0;
}
.notif-icon-wrap.violet { background:var(--violet-tint); }
.notif-icon-wrap.gold   { background:var(--gold-bg); }
.notif-icon-wrap.teal   { background:var(--teal-bg); }
.notif-icon-wrap.rose   { background:var(--rose-bg); }
.notif-icon-wrap.sky    { background:var(--sky-bg); }

.notif-body { flex:1; min-width:0; padding-right:16px; }
.notif-body-title { font-size:.82rem; font-weight:600; color:var(--ink); line-height:1.35; margin-bottom:2px; }
.notif-body-desc  { font-size:.74rem; color:var(--ink-3); line-height:1.45; }
.notif-body-time  { font-size:.68rem; color:var(--ink-4); margin-top:4px; }

.notif-footer {
  padding:.85rem 1.3rem;
  border-top:1px solid var(--border);
  display:flex; justify-content:center;
}
.notif-view-all {
  font-size:.8rem; font-weight:600; color:var(--violet);
  display:flex; align-items:center; gap:5px;
  padding:6px 16px; border-radius:var(--r-sm);
  transition:background .2s;
}
.notif-view-all:hover { background:var(--violet-ghost); }

/* ═══════════════════════════════════════════════
   DRAWER (Mobile)
═══════════════════════════════════════════════ */
.scrim {
  position:fixed; inset:0; z-index:850;
  background:rgba(14,12,26,.25);
  backdrop-filter:blur(5px);
  opacity:0; pointer-events:none; transition:opacity .3s;
}
.scrim.open { opacity:1; pointer-events:all; }

.drawer {
  position:fixed; top:0; left:0; bottom:0;
  width:min(300px,82vw);
  background:var(--bg-card);
  border-right:1px solid var(--border);
  padding:0;
  z-index:860; display:flex; flex-direction:column;
  transform:translateX(-100%);
  transition:transform .38s var(--ease);
  box-shadow:var(--shadow-xl);
  overflow:hidden;
}
.drawer.open { transform:translateX(0); }

.drawer-top {
  padding:1.4rem 1.2rem 1rem;
  border-bottom:1px solid var(--border);
  background:linear-gradient(160deg,var(--violet-tint) 0%,var(--bg-card) 100%);
}
.drawer-user {
  display:flex; align-items:center; gap:12px; margin-bottom:1rem;
}
.drawer-avatar {
  width:48px; height:48px; border-radius:14px;
  background:linear-gradient(145deg,var(--violet),var(--violet-2));
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 14px rgba(83,64,214,.3);
}
.drawer-user-info h4 { font-size:.95rem; font-weight:700; color:var(--ink); }
.drawer-user-info p { font-size:.73rem; color:var(--ink-3); margin-top:1px; }
.drawer-stats {
  display:flex; gap:0;
  background:var(--bg-soft); border-radius:var(--r-md);
  overflow:hidden; border:1px solid var(--border);
}
.dstat {
  flex:1; padding:.7rem .5rem; text-align:center;
  border-right:1px solid var(--border);
}
.dstat:last-child { border-right:none; }
.dstat-val { font-family:'Instrument Serif',serif; font-size:1.1rem; color:var(--violet); font-weight:400; }
.dstat-lbl { font-size:.6rem; color:var(--ink-3); font-weight:600; letter-spacing:.06em; text-transform:uppercase; margin-top:1px; }

.drawer-nav { flex:1; overflow-y:auto; padding:1rem .8rem; }
.drawer-section-lbl {
  font-size:.62rem; font-weight:700; letter-spacing:.14em;
  text-transform:uppercase; color:var(--ink-4);
  padding:4px 8px 6px;
}
.drawer-item {
  display:flex; align-items:center; gap:11px;
  padding:11px 12px; border-radius:var(--r-md);
  font-size:.88rem; font-weight:500; color:var(--ink-2);
  width:100%; text-align:left; transition:all .2s; margin-bottom:2px;
}
.drawer-item:hover { background:var(--violet-ghost); color:var(--violet); }
.drawer-item.active { background:var(--violet-tint); color:var(--violet); font-weight:600; }
.drawer-item .d-ico { width:34px; height:34px; border-radius:var(--r-sm); display:flex; align-items:center; justify-content:center; background:var(--bg-soft); flex-shrink:0; }
.drawer-item.active .d-ico { background:var(--violet-ghost); }
.drawer-item:hover .d-ico { background:var(--violet-ghost); }
.drawer-item .d-badge { margin-left:auto; background:var(--rose); color:#fff; font-size:.6rem; font-weight:700; padding:2px 7px; border-radius:10px; }

.drawer-bottom {
  padding:.8rem;
  border-top:1px solid var(--border);
  background:var(--bg-soft);
}
.drawer-sign-out {
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:var(--r-md);
  font-size:.85rem; font-weight:500; color:var(--rose);
  width:100%; transition:background .2s;
}
.drawer-sign-out:hover { background:var(--rose-bg); }

/* ═══════════════════════════════════════════════
   MOBILE BOTTOM NAV BAR
═══════════════════════════════════════════════ */
.mob-nav {
  display:none;
  position:fixed; bottom:0; left:0; right:0; z-index:800;
  height:var(--mob-bar);
  background:rgba(248,246,242,.96);
  backdrop-filter:blur(24px) saturate(1.5);
  -webkit-backdrop-filter:blur(24px) saturate(1.5);
  border-top:1px solid var(--border);
  padding:0 .5rem;
  padding-bottom:env(safe-area-inset-bottom);
  align-items:center; justify-content:space-around;
}
.mob-nav-item {
  display:flex; flex-direction:column; align-items:center; gap:3px;
  padding:8px 12px; border-radius:var(--r-md);
  color:var(--ink-3); transition:all .2s; position:relative;
  flex:1;
}
.mob-nav-item.active { color:var(--violet); }
.mob-nav-item span {
  font-size:.6rem; font-weight:600; letter-spacing:.02em;
}
.mob-nav-item .mob-badge {
  position:absolute; top:5px; right:18px;
  width:8px; height:8px; border-radius:50%;
  background:var(--rose); border:1.5px solid var(--bg);
}
.mob-nav-active-pill {
  position:absolute; bottom:-4px;
  width:20px; height:3px; border-radius:2px;
  background:var(--violet);
  transition:all .3s var(--spring);
}

/* ═══════════════════════════════════════════════
   HERO
═══════════════════════════════════════════════ */
.hero {
  max-width:1340px; margin:0 auto;
  padding:clamp(3rem,7vw,6rem) clamp(1rem,4vw,2.2rem) clamp(1.5rem,3vw,2.5rem);
}
/* Decorative background blob */
.hero-blob {
  position:absolute; top:-60px; right:-80px; z-index:0;
  width:min(500px,60vw); height:min(500px,60vw);
  background:radial-gradient(ellipse at 60% 40%, rgba(83,64,214,.09) 0%, transparent 70%);
  pointer-events:none;
}

.hero-inner { position:relative; z-index:1; }
.hero-badge {
  display:inline-flex; align-items:center; gap:8px;
  background:var(--violet-tint); border:1px solid var(--violet-border);
  border-radius:var(--r-2xl); padding:5px 14px 5px 6px;
  font-size:.68rem; font-weight:700; color:var(--violet);
  letter-spacing:.08em; text-transform:uppercase; margin-bottom:1.4rem;
}
.hero-badge-ico {
  width:22px; height:22px; border-radius:50%;
  background:linear-gradient(135deg,var(--violet),var(--violet-2));
  display:flex; align-items:center; justify-content:center;
}
.live-dot { width:6px; height:6px; border-radius:50%; background:#fff; animation:blink 1.8s infinite; }
@keyframes blink { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.8)} }

.hero h1 {
  font-family:'Instrument Serif',serif;
  font-size:clamp(2.6rem,6vw,5rem);
  font-weight:400; line-height:1.07; letter-spacing:-1px;
  color:var(--ink); max-width:660px;
}
.hero h1 em { font-style:italic; color:var(--violet); }
.hero h1 .line2 { display:block; }

.hero-desc {
  margin-top:1.2rem; font-size:1rem; color:var(--ink-3);
  max-width:460px; line-height:1.8; font-weight:400;
}

/* Search bar on hero */
.hero-search {
  display:flex; align-items:center; gap:0;
  background:var(--bg-card); border:1.5px solid var(--border-md);
  border-radius:var(--r-xl); overflow:hidden;
  margin-top:1.8rem; max-width:480px;
  box-shadow:var(--shadow-sm);
  transition:border-color .2s, box-shadow .2s;
}
.hero-search:focus-within { border-color:var(--violet-border); box-shadow:var(--shadow-md); }
.hero-search-ico { padding:0 .9rem 0 1.1rem; color:var(--ink-3); flex-shrink:0; }
.hero-search input {
  flex:1; padding:.85rem .5rem;
  font-family:'Sora',sans-serif; font-size:.88rem; font-weight:400;
  color:var(--ink); background:none; border:none; outline:none;
}
.hero-search input::placeholder { color:var(--ink-4); }
.hero-search-btn {
  margin:.4rem; padding:.6rem 1.2rem;
  background:var(--violet); color:#fff;
  border-radius:var(--r-lg); font-size:.8rem; font-weight:600;
  transition:background .2s, transform .2s;
}
.hero-search-btn:hover { background:var(--violet-2); }

.hero-cta { display:flex; gap:10px; margin-top:1.4rem; flex-wrap:wrap; align-items:center; }
.btn-primary {
  display:flex; align-items:center; gap:8px;
  background:var(--violet); color:#fff;
  font-weight:600; font-size:.87rem; padding:12px 24px;
  border-radius:var(--r-md);
  box-shadow:0 6px 22px rgba(83,64,214,.32);
  transition:all var(--t) var(--ease);
}
.btn-primary:hover { background:var(--violet-2); transform:translateY(-2px); box-shadow:0 12px 32px rgba(83,64,214,.4); }
.btn-ghost {
  display:flex; align-items:center; gap:8px;
  background:var(--bg-card); color:var(--ink-2);
  border:1.5px solid var(--border-md);
  font-weight:600; font-size:.87rem; padding:11px 22px;
  border-radius:var(--r-md); transition:all .2s;
}
.btn-ghost:hover { border-color:var(--violet-border); color:var(--violet); }

/* Hero stats */
.hero-stats {
  display:flex; gap:0; margin-top:2.8rem;
  background:var(--bg-card); border:1px solid var(--border);
  border-radius:var(--r-xl); width:fit-content;
  box-shadow:var(--shadow-sm); overflow:hidden;
}
.hstat { padding:.95rem 1.8rem; border-right:1px solid var(--border); }
.hstat:last-child { border-right:none; }
.hstat-val {
  font-family:'Instrument Serif',serif;
  font-size:1.6rem; color:var(--violet); line-height:1;
}
.hstat-lbl { font-size:.68rem; color:var(--ink-3); font-weight:600; letter-spacing:.04em; margin-top:3px; text-transform:uppercase; }

/* ═══════════════════════════════════════════════
   SECTION
═══════════════════════════════════════════════ */
.section { padding:clamp(1.5rem,4vw,3rem) 0; }
.sec-head {
  display:flex; align-items:flex-end; justify-content:space-between;
  padding:0 clamp(1rem,4vw,2.2rem);
  max-width:1340px; margin:0 auto 1.3rem;
}
.sec-left { display:flex; flex-direction:column; gap:2px; }
.sec-eye {
  font-size:.63rem; font-weight:700; letter-spacing:.15em;
  text-transform:uppercase; color:var(--violet);
}
.sec-title {
  font-family:'Instrument Serif',serif;
  font-size:clamp(1.35rem,2.5vw,1.85rem); font-weight:400;
  color:var(--ink); line-height:1.15;
}
.sec-link {
  display:flex; align-items:center; gap:5px;
  font-size:.78rem; font-weight:600; color:var(--violet);
  opacity:.7; transition:opacity .2s; padding-bottom:2px;
}
.sec-link:hover { opacity:1; }

/* ═══════════════════════════════════════════════
   HORIZONTAL RAIL
═══════════════════════════════════════════════ */
.rail {
  display:flex; gap:1rem;
  padding:.4rem clamp(1rem,4vw,2.2rem) 1.2rem;
  overflow-x:auto; scroll-snap-type:x mandatory;
  scroll-behavior:smooth; -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}
.rail::-webkit-scrollbar { display:none; }

/* ═══════════════════════════════════════════════
   WHAT'S NEW CARDS
═══════════════════════════════════════════════ */
.wn-card {
  flex:0 0 min(355px,80vw); height:230px;
  border-radius:var(--r-xl); overflow:hidden;
  position:relative; scroll-snap-align:start; cursor:pointer;
  box-shadow:var(--shadow-md);
  transition:transform var(--t) var(--ease), box-shadow var(--t) var(--ease);
}
.wn-card:hover { transform:translateY(-7px) scale(1.012); box-shadow:var(--shadow-lg); }
.wn-bg { position:absolute; inset:0; background-size:cover; background-position:center; transition:transform .6s var(--ease); }
.wn-card:hover .wn-bg { transform:scale(1.06); }
.wn-grad { position:absolute; inset:0; background:linear-gradient(175deg, rgba(8,6,20,.03) 0%, rgba(8,6,20,.85) 100%); }
.wn-body { position:absolute; inset:0; display:flex; flex-direction:column; justify-content:space-between; padding:1.1rem 1.2rem; }
.wn-top { display:flex; justify-content:space-between; align-items:flex-start; }
.wn-chip {
  display:inline-flex; align-items:center; gap:5px;
  padding:3px 11px; border-radius:var(--r-2xl);
  font-size:.62rem; font-weight:700; letter-spacing:.07em; text-transform:uppercase;
  backdrop-filter:blur(10px);
}
.wn-chip.c-violet { background:rgba(83,64,214,.82); color:#fff; }
.wn-chip.c-gold   { background:rgba(212,137,26,.88); color:#fff; }
.wn-chip.c-teal   { background:rgba(14,168,150,.88); color:#fff; }
.wn-chip.c-rose   { background:rgba(217,61,90,.88);  color:#fff; }
.wn-ext {
  width:30px; height:30px; border-radius:50%;
  background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.2);
  display:flex; align-items:center; justify-content:center; color:#fff;
  transition:all .25s;
}
.wn-card:hover .wn-ext { background:rgba(255,255,255,.26); transform:translate(2px,-2px); }
.wn-bottom h3 { font-family:'Instrument Serif',serif; font-size:1.1rem; color:#fff; line-height:1.3; margin-bottom:.3rem; }
.wn-bottom p  { font-size:.76rem; color:rgba(255,255,255,.66); line-height:1.55; }

/* ═══════════════════════════════════════════════
   SUBJECT CARDS
═══════════════════════════════════════════════ */
.subj-card {
  flex:0 0 min(136px,33vw); aspect-ratio:1;
  border-radius:var(--r-xl);
  background:var(--bg-card); border:1.5px solid var(--border);
  box-shadow:var(--shadow-sm);
  display:flex; flex-direction:column;
  align-items:center; justify-content:center; gap:.6rem;
  scroll-snap-align:start; cursor:pointer;
  position:relative; overflow:hidden; transition:all var(--t) var(--ease);
}
.subj-shine { position:absolute; inset:0; background:linear-gradient(145deg,var(--violet),var(--violet-2)); opacity:0; transition:opacity var(--t) var(--ease); }
.subj-card:hover { transform:translateY(-6px) scale(1.04); box-shadow:var(--shadow-lg); border-color:transparent; }
.subj-card:hover .subj-shine { opacity:1; }
.subj-ico {
  width:44px; height:44px; border-radius:var(--r-md);
  display:flex; align-items:center; justify-content:center;
  position:relative; z-index:1; transition:transform .3s var(--spring);
}
.subj-card:hover .subj-ico { transform:scale(1.15) translateY(-2px); }
.subj-card:hover .subj-ico svg * { stroke:rgba(255,255,255,.92) !important; }
.subj-card:hover .subj-ico svg .fi { fill:rgba(255,255,255,.92) !important; stroke:none !important; }
.subj-nm { font-size:.8rem; font-weight:700; color:var(--ink); position:relative; z-index:1; transition:color .25s; }
.subj-card:hover .subj-nm { color:#fff; }
.subj-ct { font-size:.65rem; color:var(--ink-4); position:relative; z-index:1; transition:color .25s; }
.subj-card:hover .subj-ct { color:rgba(255,255,255,.7); }

/* ═══════════════════════════════════════════════
   VIDEO CARDS
═══════════════════════════════════════════════ */
.vid-card {
  flex:0 0 min(272px,75vw); border-radius:var(--r-xl);
  background:var(--bg-card); border:1px solid var(--border);
  overflow:hidden; scroll-snap-align:start; cursor:pointer;
  box-shadow:var(--shadow-sm); transition:all var(--t) var(--ease);
}
.vid-card:hover { transform:translateY(-7px); box-shadow:var(--shadow-lg); }
.vid-thumb { position:relative; aspect-ratio:16/9; overflow:hidden; }
.vid-thumb-bg { width:100%; height:100%; background-size:cover; background-position:center; transition:transform .55s var(--ease); }
.vid-card:hover .vid-thumb-bg { transform:scale(1.07); }
.vid-dur {
  position:absolute; bottom:8px; right:8px;
  background:rgba(8,6,20,.72); backdrop-filter:blur(6px);
  color:#fff; font-size:.67rem; font-weight:600;
  padding:3px 9px; border-radius:var(--r-xs); letter-spacing:.02em;
}
.vid-play-ov {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(83,64,214,.26); opacity:0; transition:opacity .26s;
}
.vid-card:hover .vid-play-ov { opacity:1; }
.play-ring {
  width:50px; height:50px; border-radius:50%;
  background:rgba(255,255,255,.95); box-shadow:0 6px 22px rgba(83,64,214,.28);
  display:flex; align-items:center; justify-content:center;
  transition:transform var(--spring) .04s;
}
.vid-card:hover .play-ring { transform:scale(1.12); }
.vid-body { padding:.9rem 1rem 1rem; }
.vid-subj { font-size:.62rem; font-weight:700; letter-spacing:.1em; text-transform:uppercase; color:var(--violet); margin-bottom:.3rem; }
.vid-title { font-size:.86rem; font-weight:600; color:var(--ink); line-height:1.45; margin-bottom:.4rem; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.vid-meta { display:flex; align-items:center; gap:7px; font-size:.7rem; color:var(--ink-4); }
.vid-dot { width:2.5px; height:2.5px; border-radius:50%; background:var(--ink-4); }

/* ═══════════════════════════════════════════════
   SKELETON
═══════════════════════════════════════════════ */
.skel {
  background:linear-gradient(90deg, var(--bg-soft) 25%, var(--bg-mid) 50%, var(--bg-soft) 75%);
  background-size:300% 100%; animation:shim 1.7s infinite; border-radius:var(--r-xl);
}
@keyframes shim { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

/* ═══════════════════════════════════════════════
   MODAL SYSTEM
═══════════════════════════════════════════════ */
.backdrop {
  position:fixed; inset:0; z-index:1000;
  display:flex; align-items:center; justify-content:center;
  padding:clamp(.4rem,3vw,1.2rem);
  background:rgba(8,6,20,.52); backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  opacity:0; pointer-events:none; transition:opacity .28s;
}
.backdrop.open { opacity:1; pointer-events:all; }
.modal {
  width:100%; max-height:94vh;
  background:var(--bg); border:1px solid var(--border-md);
  border-radius:var(--r-xl); box-shadow:var(--shadow-xl);
  overflow:hidden; display:flex; flex-direction:column;
  transform:translateY(28px) scale(.97);
  transition:transform .4s var(--spring), opacity .28s;
  opacity:0;
}
.backdrop.open .modal { transform:translateY(0) scale(1); opacity:1; }

.mhdr {
  display:flex; align-items:center; justify-content:space-between;
  padding:1.15rem 1.5rem; border-bottom:1px solid var(--border);
  background:var(--bg-card); flex-shrink:0; gap:.8rem;
}
.mhdr-info { display:flex; flex-direction:column; gap:2px; min-width:0; }
.mhdr-title {
  font-family:'Instrument Serif',serif;
  font-size:1.2rem; font-weight:400; color:var(--ink);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.mhdr-sub { font-size:.72rem; color:var(--ink-3); font-weight:500; }
.mhdr-actions { display:flex; align-items:center; gap:7px; flex-shrink:0; }
.ico-btn {
  width:34px; height:34px; border-radius:var(--r-sm);
  display:flex; align-items:center; justify-content:center;
  background:var(--bg-soft); border:1px solid var(--border);
  color:var(--ink-3); transition:all .2s;
}
.ico-btn:hover { background:var(--violet-ghost); border-color:var(--violet-border); color:var(--violet); }
.ico-btn.x-btn:hover { transform:rotate(90deg); }

/* ═══════════════════════════════════════════════
   LESSONS MODAL
═══════════════════════════════════════════════ */
#bd-lessons .modal { max-width:800px; }
.modal-body { overflow-y:auto; padding:1.3rem 1.5rem; flex:1; }
.lessons-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:.8rem; }
.lsn-card {
  background:var(--bg-card); border:1.5px solid var(--border);
  border-radius:var(--r-lg); padding:1.1rem 1rem;
  cursor:pointer; transition:all .24s var(--ease);
  display:flex; flex-direction:column; gap:.45rem; position:relative; overflow:hidden;
}
.lsn-card::before {
  content:''; position:absolute; left:0; top:0; bottom:0; width:3px;
  background:var(--violet); border-radius:0 3px 3px 0;
  transform:scaleY(0); transform-origin:center; transition:transform .24s var(--ease);
}
.lsn-card:hover::before { transform:scaleY(1); }
.lsn-card:hover { border-color:var(--violet-border); transform:translateY(-3px); box-shadow:var(--shadow-md); }
.lsn-num { font-size:.62rem; font-weight:700; letter-spacing:.12em; text-transform:uppercase; color:var(--violet); }
.lsn-name { font-size:.86rem; font-weight:600; color:var(--ink); line-height:1.45; }
.lsn-meta { display:flex; align-items:center; gap:5px; font-size:.68rem; color:var(--ink-4); margin-top:auto; padding-top:.25rem; }
.lsn-sep { width:2px; height:2px; border-radius:50%; background:var(--ink-4); }

/* ═══════════════════════════════════════════════
   VIDEO PLAYER MODAL
═══════════════════════════════════════════════ */
#bd-player .modal { max-width:1120px; }

.player-shell {
  display:flex; flex-direction:row;
  flex:1; min-height:0; overflow:hidden;
  height:clamp(360px,50vw,560px);
}

/* Video side */
.pvid { flex:1; min-width:0; display:flex; flex-direction:column; background:#06040e; overflow:hidden; }
.pvid-vp { position:relative; width:100%; padding-bottom:56.25%; flex-shrink:0; }
.pvid-vp iframe, .pvid-ph { position:absolute; inset:0; width:100%; height:100%; border:none; }
.pvid-ph { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px; background:#06040e; }
.ph-ring {
  width:70px; height:70px; border-radius:50%;
  background:rgba(83,64,214,.15); border:1.5px solid rgba(83,64,214,.25);
  display:flex; align-items:center; justify-content:center;
  animation:pulse-ring 3s ease-in-out infinite;
}
@keyframes pulse-ring { 0%,100%{box-shadow:0 0 0 0 rgba(83,64,214,.2)} 50%{box-shadow:0 0 0 14px rgba(83,64,214,0)} }
.pvid-ph p { font-size:.78rem; color:rgba(255,255,255,.35); }
.pvid-meta { padding:.85rem 1.1rem; background:#0c0916; border-top:1px solid rgba(255,255,255,.05); flex-shrink:0; }
.pvid-meta h3 { font-size:.9rem; font-weight:600; color:#fff; margin-bottom:2px; }
.pvid-meta-sub { font-size:.68rem; color:rgba(255,255,255,.36); }
.pvid-prog { height:2px; background:rgba(255,255,255,.07); border-radius:2px; margin-top:.6rem; }
.pvid-bar { height:100%; width:0; border-radius:2px; background:linear-gradient(90deg,var(--violet),var(--violet-3)); transition:width .6s var(--ease); }

/* Playlist side */
.pl-side {
  width:305px; flex-shrink:0;
  display:flex; flex-direction:column;
  border-left:1px solid var(--border);
  background:var(--bg-card); overflow:hidden; min-height:0;
}
.pl-hdr {
  display:flex; align-items:center; justify-content:space-between;
  padding:.8rem 1.1rem; border-bottom:1px solid var(--border);
  background:var(--bg-card); flex-shrink:0;
}
.pl-hdr-lbl {
  font-size:.66rem; font-weight:700; letter-spacing:.13em;
  text-transform:uppercase; color:var(--ink-3);
  display:flex; align-items:center; gap:6px;
}
.pl-badge {
  background:var(--violet-ghost); color:var(--violet);
  font-size:.66rem; font-weight:700;
  padding:2px 9px; border-radius:14px; border:1px solid var(--violet-border);
}
.pl-list { overflow-y:auto; flex:1; min-height:0; -webkit-overflow-scrolling:touch; }
.pl-item {
  display:flex; align-items:center; gap:9px;
  padding:9px 11px; border-bottom:1px solid var(--border);
  cursor:pointer; position:relative; transition:background .17s; user-select:none;
}
.pl-item:last-child { border-bottom:none; }
.pl-item:hover { background:var(--bg-soft); }
.pl-item.active { background:var(--violet-ghost); }
.pl-item.active::before { content:''; position:absolute; left:0; top:0; bottom:0; width:3px; background:var(--violet); border-radius:0 3px 3px 0; }
.pl-n { font-size:.66rem; font-weight:700; color:var(--ink-4); width:18px; flex-shrink:0; text-align:center; }
.pl-item.active .pl-n { color:var(--violet); }
.pl-thumb { width:66px; height:40px; border-radius:var(--r-sm); flex-shrink:0; overflow:hidden; position:relative; }
.pl-thumb-bg { width:100%; height:100%; background-size:cover; background-position:center; }
.pl-thumb-ov { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(83,64,214,.56); opacity:0; transition:opacity .2s; }
.pl-item.active .pl-thumb-ov { opacity:1; }
.pl-info { flex:1; min-width:0; }
.pl-name { font-size:.77rem; font-weight:500; color:var(--ink-2); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; line-height:1.4; }
.pl-item.active .pl-name { color:var(--violet); font-weight:600; }
.pl-dur { font-size:.66rem; color:var(--ink-4); margin-top:2px; }

/* Mobile player */
@media (max-width:700px) {
  .backdrop { padding:.3rem; align-items:flex-end; }
  #bd-player .modal { max-height:97vh; border-radius:var(--r-xl) var(--r-xl) 0 0; }
  .player-shell { flex-direction:column; height:auto; overflow:hidden; }
  .pvid { flex-shrink:0; }
  .pl-side { width:100%; border-left:none; border-top:1.5px solid var(--border); height:37vh; flex-shrink:0; }
  #bd-lessons .modal { max-height:92vh; border-radius:var(--r-xl) var(--r-xl) 0 0; }
  .backdrop:has(#bd-lessons) { align-items:flex-end; padding:.3rem; }
}
@media (max-width:920px) and (min-width:701px) {
  .player-shell { height:clamp(320px,46vw,500px); }
  .pl-side { width:245px; }
}

/* ═══════════════════════════════════════════════
   CTA BANNER
═══════════════════════════════════════════════ */
.cta {
  margin:2rem clamp(1rem,4vw,2.2rem) 1.5rem;
  border-radius:var(--r-xl);
  background:linear-gradient(140deg,#3520b8 0%,var(--violet) 45%,#8466f0 80%,#a682f5 100%);
  padding:clamp(1.8rem,5vw,2.8rem) clamp(1.4rem,4vw,3.2rem);
  display:flex; align-items:center; justify-content:space-between;
  gap:2rem; flex-wrap:wrap; position:relative; overflow:hidden;
}
.cta::before { content:''; position:absolute; width:380px; height:380px; border-radius:50%; background:rgba(255,255,255,.05); top:-140px; right:-90px; }
.cta::after  { content:''; position:absolute; width:220px; height:220px; border-radius:50%; background:rgba(255,255,255,.04); bottom:-90px; right:22%; }
.cta-txt { position:relative; z-index:1; }
.cta-txt h2 { font-family:'Instrument Serif',serif; font-size:clamp(1.5rem,3.5vw,2.1rem); font-weight:400; color:#fff; line-height:1.15; }
.cta-txt p  { color:rgba(255,255,255,.68); margin-top:.45rem; font-size:.92rem; }
.cta-btn {
  position:relative; z-index:1;
  display:flex; align-items:center; gap:9px;
  background:#fff; color:var(--violet);
  font-weight:700; font-size:.88rem; padding:13px 26px;
  border-radius:var(--r-md); box-shadow:0 8px 28px rgba(0,0,0,.14);
  white-space:nowrap; flex-shrink:0; transition:all var(--t) var(--ease);
}
.cta-btn:hover { transform:translateY(-2px); box-shadow:0 14px 38px rgba(0,0,0,.2); }

/* ═══════════════════════════════════════════════
   FOOTER
═══════════════════════════════════════════════ */
.footer {
  display:flex; align-items:center; justify-content:space-between;
  flex-wrap:wrap; gap:1rem;
  padding:1.6rem clamp(1rem,4vw,2.2rem);
  border-top:1px solid var(--border);
  /* leave space for mobile bottom nav */
}
.foot-brand { display:flex; align-items:center; gap:9px; }
.foot-mark {
  width:28px; height:28px; border-radius:8px;
  background:linear-gradient(145deg,var(--violet),var(--violet-2));
  display:flex; align-items:center; justify-content:center;
}
.foot-name { font-family:'Instrument Serif',serif; font-size:1.05rem; color:var(--ink); }
.foot-copy { font-size:.72rem; color:var(--ink-4); }
.foot-links { display:flex; gap:1.4rem; }
.foot-links a { font-size:.75rem; color:var(--ink-3); transition:color .2s; }
.foot-links a:hover { color:var(--violet); }

/* Mobile bottom padding so content isn't hidden behind bottom nav */
@media (max-width:768px) {
  body { padding-bottom:var(--mob-bar); }
}

/* ═══════════════════════════════════════════════
   RESPONSIVE
═══════════════════════════════════════════════ */
@media (max-width:768px) {
  .nav-tabs { display:none; }
  .nav-avatar { display:none; }
  .burger { display:flex; }
  .mob-nav { display:flex; }
  .hero-stats { flex-wrap:wrap; }
  .hstat { padding:.8rem 1.2rem; }
  .lessons-grid { grid-template-columns:repeat(auto-fill,minmax(148px,1fr)); }
}

/* ═══════════════════════════════════════════════
   ANIMATIONS
═══════════════════════════════════════════════ */
.fade-up { opacity:0; transform:translateY(22px); transition:opacity .65s var(--ease), transform .65s var(--ease); }
.fade-up.vis { opacity:1; transform:translateY(0); }
.stagger > * { opacity:0; transform:translateY(18px); transition:opacity .5s var(--ease), transform .5s var(--ease); }
.stagger.vis > * { opacity:1; transform:translateY(0); }
.stagger.vis > *:nth-child(1){transition-delay:.03s}
.stagger.vis > *:nth-child(2){transition-delay:.07s}
.stagger.vis > *:nth-child(3){transition-delay:.11s}
.stagger.vis > *:nth-child(4){transition-delay:.15s}
.stagger.vis > *:nth-child(5){transition-delay:.19s}
.stagger.vis > *:nth-child(6){transition-delay:.23s}
.stagger.vis > *:nth-child(7){transition-delay:.27s}
.stagger.vis > *:nth-child(8){transition-delay:.31s}
.stagger.vis > *:nth-child(9){transition-delay:.35s}
.stagger.vis > *:nth-child(10){transition-delay:.39s}
</style>
</head>
<body>

<!-- ═══════════════ NAVBAR ═══════════════ -->
<nav class="nav">
  <a href="#" class="nav-brand">
    <div class="nav-logo">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
        <path d="M3 5.5C3 4.4 3.9 3.5 5 3.5H11V18.5H5C3.9 18.5 3 17.6 3 16.5V5.5Z" fill="rgba(255,255,255,.22)" stroke="white" stroke-width="1.4"/>
        <path d="M11 3.5H17C18.1 3.5 19 4.4 19 5.5V16.5C19 17.6 18.1 18.5 17 18.5H11V3.5Z" fill="rgba(255,255,255,.10)" stroke="white" stroke-width="1.4"/>
        <line x1="11" y1="4" x2="11" y2="18" stroke="rgba(255,255,255,.5)" stroke-width="1" stroke-dasharray="2 1.5"/>
        <path d="M14.5 7.5L15.5 6.2L15.8 7.8L17.2 8.5L15.8 9.2L15.5 10.8L14.5 9.5L13 9.2L14.5 8.5L13 7.8Z" fill="white"/>
      </svg>
    </div>
    <span class="nav-name">Sa<b>hl</b></span>
  </a>

  <nav class="nav-tabs" aria-label="Main navigation">
    <a href="#" class="nav-tab active">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M6.5 1L12 5.5V12H8.5V9H4.5V12H1V5.5Z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/></svg>
      Home
    </a>
    <a href="#" class="nav-tab">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><circle cx="6.5" cy="5" r="2.8" stroke="currentColor" stroke-width="1.4"/><path d="M1.5 12C1.5 9.5 3.8 7.5 6.5 7.5C9.2 7.5 11.5 9.5 11.5 12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
      Profile
    </a>
    <a href="#" class="nav-tab">
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><circle cx="6.5" cy="6.5" r="2" stroke="currentColor" stroke-width="1.4"/><path d="M6.5 1V2M6.5 11V12M1 6.5H2M11 6.5H12M2.6 2.6L3.3 3.3M9.7 9.7L10.4 10.4M10.4 2.6L9.7 3.3M3.3 9.7L2.6 10.4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
      Settings
    </a>
  </nav>

  <div class="nav-right">
    <!-- Notifications -->
    <button class="nav-icon-btn" id="notifBtn" aria-label="Notifications" aria-expanded="false">
      <svg width="17" height="17" viewBox="0 0 17 17" fill="none">
        <path d="M8.5 1.8C6.2 1.8 4.3 3.7 4.3 6V10.2L2.8 12H14.2L12.7 10.2V6C12.7 3.7 10.8 1.8 8.5 1.8Z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
        <path d="M7 12.5C7 13.3 7.7 14 8.5 14C9.3 14 10 13.3 10 12.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
      </svg>
      <span class="notif-badge" id="notifBadge">3</span>
    </button>

    <!-- Avatar (desktop) -->
    <div class="nav-avatar" aria-label="Profile">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <circle cx="8" cy="5.5" r="2.8" stroke="var(--violet)" stroke-width="1.4"/>
        <path d="M2 14C2 11.2 4.7 9 8 9C11.3 9 14 11.2 14 14" stroke="var(--violet)" stroke-width="1.4" stroke-linecap="round"/>
      </svg>
    </div>

    <!-- Burger -->
    <button class="burger" id="burger" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<!-- ═══════════════ NOTIFICATION PANEL ═══════════════ -->
<div class="notif-panel" id="notifPanel" role="dialog" aria-label="Notifications">
  <div class="notif-panel-hdr">
    <div class="notif-panel-title">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 1.5C5.8 1.5 4 3.3 4 5.5V10L2.5 11.5H13.5L12 10V5.5C12 3.3 10.2 1.5 8 1.5Z" stroke="var(--violet)" stroke-width="1.4" stroke-linejoin="round"/><path d="M6.5 12C6.5 12.8 7.2 13.5 8 13.5C8.8 13.5 9.5 12.8 9.5 12" stroke="var(--violet)" stroke-width="1.4" stroke-linecap="round"/></svg>
      Notifications
      <span class="notif-panel-count" id="notifCount">3</span>
    </div>
    <button class="notif-mark-all" id="markAllBtn">Mark all read</button>
  </div>

  <div class="notif-tabs">
    <button class="notif-tab-btn active" data-filter="all">All</button>
    <button class="notif-tab-btn" data-filter="unread">Unread</button>
    <button class="notif-tab-btn" data-filter="lessons">Lessons</button>
  </div>

  <div class="notif-list" id="notifList"></div>

  <div class="notif-footer">
    <button class="notif-view-all">
      View all notifications
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5H11M8 3.5L11 6.5L8 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>
  </div>
</div>

<!-- ═══════════════ DRAWER (Mobile) ═══════════════ -->
<div class="scrim" id="scrim"></div>
<div class="drawer" id="drawer" role="dialog" aria-label="Menu">
  <div class="drawer-top">
    <div class="drawer-user">
      <div class="drawer-avatar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="8" r="4" fill="rgba(255,255,255,.8)"/>
          <path d="M4 20C4 16.7 7.6 14 12 14C16.4 14 20 16.7 20 20" stroke="rgba(255,255,255,.8)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="drawer-user-info">
        <h4>Student Account</h4>
        <p>student@sahl.edu</p>
      </div>
    </div>
    <div class="drawer-stats">
      <div class="dstat"><div class="dstat-val">12</div><div class="dstat-lbl">Lessons</div></div>
      <div class="dstat"><div class="dstat-val">5h</div><div class="dstat-lbl">Watched</div></div>
      <div class="dstat"><div class="dstat-val">3</div><div class="dstat-lbl">Subjects</div></div>
    </div>
  </div>

  <nav class="drawer-nav">
    <div class="drawer-section-lbl">Main</div>
    <a href="#" class="drawer-item active">
      <div class="d-ico"><svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 1L16 7V17H12V12H6V17H2V7Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg></div>
      Home
    </a>
    <a href="#" class="drawer-item">
      <div class="d-ico"><svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="6.5" r="3.5" stroke="currentColor" stroke-width="1.5"/><path d="M2 16C2 12.7 5.1 10 9 10C12.9 10 16 12.7 16 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      Profile
    </a>
    <a href="#" class="drawer-item">
      <div class="d-ico"><svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/><path d="M9 1.5V3.5M9 14.5V16.5M1.5 9H3.5M14.5 9H16.5M3.8 3.8L5.2 5.2M12.8 12.8L14.2 14.2M14.2 3.8L12.8 5.2M5.2 12.8L3.8 14.2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      Settings
    </a>
    <div class="drawer-section-lbl" style="margin-top:.8rem">Learning</div>
    <a href="#" class="drawer-item">
      <div class="d-ico"><svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M2 4H16M2 8H16M2 12H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      My Lessons
      <span class="d-badge">12</span>
    </a>
    <a href="#" class="drawer-item">
      <div class="d-ico"><svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="1.5"/><path d="M9 5V9L11.5 11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      Watch History
    </a>
    <a href="#" class="drawer-item" onclick="document.getElementById('notifPanel').classList.toggle('open')">
      <div class="d-ico" style="position:relative">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 2C6.8 2 5 3.8 5 6V11L3.5 12.5H14.5L13 11V6C13 3.8 11.2 2 9 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/><path d="M7.5 13C7.5 13.8 8.2 14.5 9 14.5C9.8 14.5 10.5 13.8 10.5 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        <span class="d-badge" style="position:absolute;top:-4px;right:-4px;margin:0;padding:0 4px;font-size:.55rem;min-width:15px;height:15px;border-radius:8px">3</span>
      </div>
      Notifications
      <span class="d-badge">3</span>
    </a>
  </nav>

  <div class="drawer-bottom">
    <button class="drawer-sign-out">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M7 9H16M13 6L16 9L13 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 5V4C11 3.4 10.6 3 10 3H4C3.4 3 3 3.4 3 4V14C3 14.6 3.4 15 4 15H10C10.6 15 11 14.6 11 14V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      Sign Out
    </button>
  </div>
</div>

<!-- ═══════════════ MOBILE BOTTOM NAV ═══════════════ -->
<div class="mob-nav" role="navigation" aria-label="Mobile navigation">
  <button class="mob-nav-item active" data-mob-page="home">
    <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><path d="M11 2L20 9V20H14V14H8V20H2V9Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/></svg>
    <span>Home</span>
    <div class="mob-nav-active-pill" style="display:block"></div>
  </button>
  <button class="mob-nav-item" data-mob-page="search">
    <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.6"/><path d="M15.5 15.5L20 20" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
    <span>Search</span>
  </button>
  <button class="mob-nav-item" data-mob-page="lessons">
    <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><rect x="3" y="3" width="16" height="18" rx="2" stroke="currentColor" stroke-width="1.6"/><path d="M7 8H15M7 12H12M7 16H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
    <span>Lessons</span>
  </button>
  <button class="mob-nav-item" id="mobNotifBtn" data-mob-page="notif">
    <div style="position:relative;display:inline-flex">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><path d="M11 2.5C8.2 2.5 6 4.7 6 7.5V13L4 15H18L16 13V7.5C16 4.7 13.8 2.5 11 2.5Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/><path d="M9 15.5C9 16.6 9.9 17.5 11 17.5C12.1 17.5 13 16.6 13 15.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
      <div class="mob-badge"></div>
    </div>
    <span>Alerts</span>
  </button>
  <button class="mob-nav-item" data-mob-page="profile">
    <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><circle cx="11" cy="7.5" r="4" stroke="currentColor" stroke-width="1.6"/><path d="M3 20C3 16.1 6.6 13 11 13C15.4 13 19 16.1 19 20" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
    <span>Profile</span>
  </button>
</div>

<!-- ═══════════════ HERO ═══════════════ -->
<div class="hero fade-up">
  <div class="hero-inner">
    <div class="hero-badge">
      <div class="hero-badge-ico"><div class="live-dot"></div></div>
      Platform Live · 2025
    </div>
    <h1>Learn anything,<em class="line2"> effortlessly.</em></h1>
    <p class="hero-desc">Your complete academic companion — explore subjects, follow expert video lessons, and grow at your own pace.</p>

    <div class="hero-search">
      <div class="hero-search-ico">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/><path d="M11 11L14.5 14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </div>
      <input type="text" placeholder="Search subjects, lessons, videos…" aria-label="Search">
      <button class="hero-search-btn">Search</button>
    </div>

    <div class="hero-cta">
      <button class="btn-primary" onclick="document.getElementById('subjects').scrollIntoView({behavior:'smooth'})">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path d="M3 7.5H12M9 4.5L12 7.5L9 10.5" stroke="white" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Explore Subjects
      </button>
      <button class="btn-ghost">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><circle cx="7.5" cy="7.5" r="6" stroke="currentColor" stroke-width="1.5"/><polygon points="6,5 11,7.5 6,10" fill="currentColor"/></svg>
        Watch Demo
      </button>
    </div>

    <div class="hero-stats">
      <div class="hstat"><div class="hstat-val">12k+</div><div class="hstat-lbl">Learners</div></div>
      <div class="hstat"><div class="hstat-val">340+</div><div class="hstat-lbl">Lessons</div></div>
      <div class="hstat"><div class="hstat-val">18</div><div class="hstat-lbl">Subjects</div></div>
      <div class="hstat"><div class="hstat-val">98%</div><div class="hstat-lbl">Satisfied</div></div>
    </div>
  </div>
</div>

<!-- ═══════════════ WHAT'S NEW ═══════════════ -->
<section class="section">
  <div class="sec-head fade-up">
    <div class="sec-left"><div class="sec-eye">Latest Updates</div><div class="sec-title">What's New</div></div>
    <a href="#" class="sec-link">View all <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5H11M8 3.5L11 6.5L8 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
  </div>
  <div class="rail stagger" id="wnRail"></div>
</section>

<!-- ═══════════════ SUBJECTS ═══════════════ -->
<section class="section" id="subjects">
  <div class="sec-head fade-up">
    <div class="sec-left"><div class="sec-eye">Browse</div><div class="sec-title">Subjects</div></div>
    <a href="#" class="sec-link">All <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5H11M8 3.5L11 6.5L8 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
  </div>
  <div class="rail stagger" id="subjRail"></div>
</section>

<!-- ═══════════════ LATEST VIDEOS ═══════════════ -->
<section class="section">
  <div class="sec-head fade-up">
    <div class="sec-left"><div class="sec-eye">Fresh Content</div><div class="sec-title">Latest Videos</div></div>
    <a href="#" class="sec-link">Browse all <svg width="13" height="13" viewBox="0 0 13 13" fill="none"><path d="M2 6.5H11M8 3.5L11 6.5L8 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
  </div>
  <div class="rail stagger" id="vidRail"></div>
</section>

<!-- ═══════════════ CTA ═══════════════ -->
<div class="cta fade-up">
  <div class="cta-txt">
    <h2>Ready to dive deeper?</h2>
    <p>Create your free account and unlock every lesson today.</p>
  </div>
  <button class="cta-btn">
    Get Started Free
    <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path d="M3 7.5H12M9 4.5L12 7.5L9 10.5" stroke="var(--violet)" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </button>
</div>

<!-- ═══════════════ FOOTER ═══════════════ -->
<footer class="footer">
  <div class="foot-brand">
    <div class="foot-mark">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M2 3.5C2 3 2.4 2.5 3 2.5H7V11.5H3C2.4 11.5 2 11 2 10.5V3.5Z" fill="rgba(255,255,255,.3)" stroke="white" stroke-width="1.2"/><path d="M7 2.5H11C11.6 2.5 12 3 12 3.5V10.5C12 11 11.6 11.5 11 11.5H7V2.5Z" fill="rgba(255,255,255,.15)" stroke="white" stroke-width="1.2"/></svg>
    </div>
    <span class="foot-name">Sahl</span>
  </div>
  <span class="foot-copy">&copy; 2025 Sahl. Built for learners.</span>
  <nav class="foot-links"><a href="#">Privacy</a><a href="#">Terms</a><a href="#">Contact</a></nav>
</footer>

<!-- ═══════════════ MODAL 1: LESSONS ═══════════════ -->
<div class="backdrop" id="bd-lessons">
  <div class="modal">
    <div class="mhdr">
      <div class="mhdr-info">
        <div class="mhdr-title" id="lsn-title">Lessons</div>
        <div class="mhdr-sub" id="lsn-sub">Select a lesson to begin</div>
      </div>
      <div class="mhdr-actions">
        <button class="ico-btn" aria-label="Search lessons">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><circle cx="6" cy="6" r="4.2" stroke="currentColor" stroke-width="1.4"/><path d="M9.2 9.2L12.5 12.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
        </button>
        <button class="ico-btn x-btn" onclick="closeModal('bd-lessons')" aria-label="Close">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        </button>
      </div>
    </div>
    <div class="modal-body"><div class="lessons-grid" id="lessonsGrid"></div></div>
  </div>
</div>

<!-- ═══════════════ MODAL 2: VIDEO PLAYER ═══════════════ -->
<div class="backdrop" id="bd-player">
  <div class="modal">
    <div class="mhdr">
      <div class="mhdr-info">
        <div class="mhdr-title" id="pl-title">Video Player</div>
        <div class="mhdr-sub" id="pl-sub">0 videos</div>
      </div>
      <div class="mhdr-actions">
        <button class="ico-btn x-btn" onclick="closeModal('bd-player')" aria-label="Close">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        </button>
      </div>
    </div>
    <div class="player-shell">
      <!-- Video -->
      <div class="pvid">
        <div class="pvid-vp">
          <div class="pvid-ph" id="playerPh">
            <div class="ph-ring">
              <svg width="26" height="26" viewBox="0 0 26 26" fill="none"><polygon points="9,6 21,13 9,20" fill="rgba(147,117,239,.8)"/></svg>
            </div>
            <p>Select a video from the playlist</p>
          </div>
          <iframe id="playerFrame" src="" allowfullscreen allow="autoplay;encrypted-media" style="display:none"></iframe>
        </div>
        <div class="pvid-meta" id="playerMeta" style="display:none">
          <h3 id="metaTitle">—</h3>
          <div class="pvid-meta-sub" id="metaSub">—</div>
          <div class="pvid-prog"><div class="pvid-bar" id="progBar"></div></div>
        </div>
      </div>
      <!-- Playlist -->
      <div class="pl-side">
        <div class="pl-hdr">
          <span class="pl-hdr-lbl">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><rect x="1" y="1.5" width="10" height="1.6" rx=".8" fill="currentColor"/><rect x="1" y="5" width="7.5" height="1.6" rx=".8" fill="currentColor"/><rect x="1" y="8.5" width="9" height="1.6" rx=".8" fill="currentColor"/></svg>
            Playlist
          </span>
          <span class="pl-badge" id="plBadge">0</span>
        </div>
        <div class="pl-list" id="plList"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ────────────────────────────────────────────────
   NOTIFICATION DATA
──────────────────────────────────────────────── */
const NOTIFS = [
  {
    id:1, type:'lesson', unread:true, time:'2 min ago',
    iconCls:'violet',
    icon:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><polygon points="5,3 15,9 5,15" stroke="var(--violet)" stroke-width="1.5" stroke-linejoin="round" fill="var(--violet-tint)"/></svg>`,
    title:'New lesson added: Quantum Mechanics Part 4',
    desc:'Your Physics course has been updated with 3 new videos.',
  },
  {
    id:2, type:'event', unread:true, time:'1 hour ago',
    iconCls:'teal',
    icon:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><rect x="2" y="3" width="14" height="13" rx="2" stroke="var(--teal)" stroke-width="1.5"/><path d="M2 7H16" stroke="var(--teal)" stroke-width="1.3"/><path d="M6 1V5M12 1V5" stroke="var(--teal)" stroke-width="1.5" stroke-linecap="round"/><circle cx="9" cy="11" r="1.5" fill="var(--teal)"/></svg>`,
    title:'Live Q&A Session starts in 1 hour',
    desc:'Expert session on Organic Chemistry — Thursday 7 PM.',
  },
  {
    id:3, type:'achievement', unread:true, time:'3 hours ago',
    iconCls:'gold',
    icon:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 2L10.8 6.5L15.5 6.8L12 10L13.1 14.8L9 12.3L4.9 14.8L6 10L2.5 6.8L7.2 6.5Z" stroke="var(--gold)" stroke-width="1.4" stroke-linejoin="round" fill="var(--gold-bg)"/></svg>`,
    title:'Achievement unlocked: 10 lessons completed!',
    desc:"You're on a roll — keep up the great learning streak.",
  },
  {
    id:4, type:'lesson', unread:false, time:'Yesterday',
    iconCls:'sky',
    icon:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><rect x="2" y="2" width="14" height="14" rx="2" stroke="var(--sky)" stroke-width="1.5"/><path d="M5 7H13M5 10H9" stroke="var(--sky)" stroke-width="1.4" stroke-linecap="round"/></svg>`,
    title:'Math Chapter 5 quiz results are ready',
    desc:'You scored 87% — excellent work on algebra!',
  },
  {
    id:5, type:'lesson', unread:false, time:'2 days ago',
    iconCls:'rose',
    icon:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="6.5" stroke="var(--rose)" stroke-width="1.5"/><path d="M9 5.5V9.5L11.5 12" stroke="var(--rose)" stroke-width="1.5" stroke-linecap="round"/></svg>`,
    title:'Your study plan has been updated',
    desc:'New weekly schedule based on your progress is ready.',
  },
];

let activeFilter = 'all';
let notifData = [...NOTIFS];

function getFiltered() {
  if (activeFilter === 'unread') return notifData.filter(n => n.unread);
  if (activeFilter === 'lessons') return notifData.filter(n => n.type === 'lesson');
  return notifData;
}

function getUnreadCount() { return notifData.filter(n=>n.unread).length; }

function updateBadge() {
  const c = getUnreadCount();
  const badge = document.getElementById('notifBadge');
  const countEl = document.getElementById('notifCount');
  if (c > 0) {
    badge.textContent = c; badge.style.display='flex';
    countEl.textContent = c; countEl.style.display='inline-block';
  } else {
    badge.style.display='none';
    countEl.style.display='none';
  }
}

function renderNotifs() {
  const list = document.getElementById('notifList');
  const filtered = getFiltered();
  if (!filtered.length) {
    list.innerHTML = `<div style="padding:2rem;text-align:center;color:var(--ink-4);font-size:.82rem;">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="none" style="margin:0 auto .6rem;display:block;opacity:.4"><path d="M16 4C11.6 4 8 7.6 8 12V20L5 23H27L24 20V12C24 7.6 20.4 4 16 4Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/><path d="M13 23.5C13 25 14.3 26 16 26C17.7 26 19 25 19 23.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
      No notifications here
    </div>`;
    return;
  }
  list.innerHTML = filtered.map(n => `
    <div class="notif-item${n.unread?' unread':''}" onclick="markRead(${n.id})">
      <div class="notif-icon-wrap ${n.iconCls}">${n.icon}</div>
      <div class="notif-body">
        <div class="notif-body-title">${n.title}</div>
        <div class="notif-body-desc">${n.desc}</div>
        <div class="notif-body-time">${n.time}</div>
      </div>
      ${n.unread ? '<div class="notif-unread-dot"></div>' : ''}
    </div>`).join('');
}

function markRead(id) {
  notifData = notifData.map(n => n.id===id ? {...n, unread:false} : n);
  updateBadge(); renderNotifs();
}

document.getElementById('markAllBtn').addEventListener('click', () => {
  notifData = notifData.map(n => ({...n, unread:false}));
  updateBadge(); renderNotifs();
});

document.querySelectorAll('.notif-tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.notif-tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    activeFilter = btn.dataset.filter;
    renderNotifs();
  });
});

/* ─── Notification panel toggle ─── */
const notifPanel = document.getElementById('notifPanel');
const notifBtn   = document.getElementById('notifBtn');

notifBtn.addEventListener('click', e => {
  e.stopPropagation();
  const open = notifPanel.classList.toggle('open');
  notifBtn.classList.toggle('active-notif', open);
  notifBtn.setAttribute('aria-expanded', String(open));
  if (open) renderNotifs();
  // close drawer if open
  if (open) toggleDrawer(false);
});

// Mobile notif button
document.getElementById('mobNotifBtn').addEventListener('click', () => {
  const open = notifPanel.classList.toggle('open');
  notifBtn.classList.toggle('active-notif', open);
  if (open) renderNotifs();
});

document.addEventListener('click', e => {
  if (!notifPanel.contains(e.target) && !notifBtn.contains(e.target) && !document.getElementById('mobNotifBtn').contains(e.target)) {
    notifPanel.classList.remove('open');
    notifBtn.classList.remove('active-notif');
  }
});

/* ────────────────────────────────────────────────
   SUBJECT ICONS
──────────────────────────────────────────────── */
const SICO = {
  Math:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M5 12H19" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/><path d="M12 5V19" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/><path d="M6 18.5L9 15.5M9 18.5L6 15.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="17.5" cy="17" r="2" stroke="currentColor" stroke-width="1.5"/><path d="M7 7H10" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/></svg>`,
  Physics:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><ellipse cx="12" cy="12" rx="8" ry="3.5" stroke="currentColor" stroke-width="1.5" transform="rotate(0 12 12)"/><ellipse cx="12" cy="12" rx="8" ry="3.5" stroke="currentColor" stroke-width="1.5" transform="rotate(60 12 12)"/><ellipse cx="12" cy="12" rx="8" ry="3.5" stroke="currentColor" stroke-width="1.5" transform="rotate(120 12 12)"/><circle cx="12" cy="12" r="2" fill="currentColor" class="fi"/></svg>`,
  English:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="12" height="16" rx="2" stroke="currentColor" stroke-width="1.6"/><path d="M7 8H11M7 11.5H13M7 15H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M17 9L21 12L17 15" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  Chemistry:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M9.5 3V11L4.5 19.5H19.5L14.5 11V3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 3H16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="9" cy="16" r="1" fill="currentColor" class="fi"/><circle cx="13.5" cy="14.5" r="1" fill="currentColor" class="fi"/><circle cx="16" cy="17" r="1" fill="currentColor" class="fi"/></svg>`,
  Biology:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 3C12 3 7 6.5 7 11.5C7 16.5 12 21 12 21C12 21 17 16.5 17 11.5C17 6.5 12 3 12 3Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/><path d="M5.5 8C5.5 8 9.5 9.5 12 12C14.5 14.5 16 19 16 19" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/><path d="M18.5 8C18.5 8 14.5 9.5 12 12C9.5 14.5 8 19 8 19" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>`,
  History:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.5 19V10L12 4L20.5 10V19H3.5Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/><rect x="9" y="12.5" width="6" height="6.5" rx="1" stroke="currentColor" stroke-width="1.4"/><path d="M8.5 7.5H15.5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`,
  CS:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="2" y="4" width="20" height="14" rx="2.5" stroke="currentColor" stroke-width="1.6"/><path d="M2 17H22" stroke="currentColor" stroke-width="1.3"/><path d="M9 21H15M12 18V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M7 10.5L9.5 13L7 15.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12.5 15H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  Arabic:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3 9C5.5 9 7 10.5 7 12.5V18C7 19 7.9 20 9 20H13.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><path d="M13.5 20C15.5 20 16.5 18.6 16.5 17.2C16.5 15.6 15.2 14.5 13.5 15" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="19" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/><path d="M19 12.5V16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="19" cy="18" r="1" fill="currentColor" class="fi"/></svg>`,
  French:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M7.5 4H16.5C17.6 4 18.5 4.9 18.5 6V11C18.5 15.5 15 18.5 12 20.5C9 18.5 5.5 15.5 5.5 11V6C5.5 4.9 6.4 4 7.5 4Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/><path d="M9 12L11.5 14.5L16 9" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  Geography:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="8.5" stroke="currentColor" stroke-width="1.6"/><path d="M3.5 12H20.5" stroke="currentColor" stroke-width="1.3"/><path d="M12 3.5C9.5 6.5 8.5 9.2 8.5 12C8.5 14.8 9.5 17.5 12 20.5" stroke="currentColor" stroke-width="1.3"/><path d="M12 3.5C14.5 6.5 15.5 9.2 15.5 12C15.5 14.8 14.5 17.5 12 20.5" stroke="currentColor" stroke-width="1.3"/><path d="M5.2 7.8H18.8M5.2 16.2H18.8" stroke="currentColor" stroke-width="1"/></svg>`,
};

const SUBJ_BG = {
  Math:'#eeeaff', Physics:'#fff8ea', English:'#e8faf7',
  Chemistry:'#fff0f2', Biology:'#e8faf7', History:'#fff8ea',
  CS:'#eeeaff', Arabic:'#fff0f2', French:'#e8faf7', Geography:'#eeeaff'
};
const SUBJ_CLR = {
  Math:'var(--violet)', Physics:'var(--gold)', English:'var(--teal)',
  Chemistry:'var(--rose)', Biology:'var(--teal)', History:'var(--gold)',
  CS:'var(--violet)', Arabic:'var(--rose)', French:'var(--teal)', Geography:'var(--violet)'
};

/* ────────────────────────────────────────────────
   DATA
──────────────────────────────────────────────── */
const G = [
  'linear-gradient(135deg,#1c0940,#5b3de8)',
  'linear-gradient(135deg,#062218,#1a6b42)',
  'linear-gradient(135deg,#28080a,#8b1e22)',
  'linear-gradient(135deg,#081632,#1e428b)',
  'linear-gradient(135deg,#181200,#6a5200)',
  'linear-gradient(135deg,#081c18,#126050)',
  'linear-gradient(135deg,#180826,#54228a)',
  'linear-gradient(135deg,#0e0822,#281864)',
];

const WN_DATA = [
  {tag:'New',   cls:'c-violet',title:'Physics Quantum Series',   desc:'30 brand-new lessons on quantum mechanics, now fully live.',  bg:G[0]},
  {tag:'Feature',cls:'c-gold', title:'AI-Powered Study Planner',desc:'Adaptive planner that builds your personalised schedule.',     bg:G[1]},
  {tag:'Event', cls:'c-teal',  title:'Live Expert Q&A Sessions', desc:'Weekly live sessions with subject experts every Thursday.',    bg:G[3]},
  {tag:'Update',cls:'c-rose',  title:'Mobile App v3.0 Released', desc:'2× faster, improved offline mode, beautiful new interface.', bg:G[6]},
];

const SUBJECTS_LIST = [
  'Math','Physics','English','Chemistry','Biology','History','CS','Arabic','French','Geography'
];
const SUBJ_COUNTS = {Math:42,Physics:38,English:29,Chemistry:31,Biology:26,History:22,CS:35,Arabic:18,French:14,Geography:20};

const LATEST = [
  {title:'Solving Differential Equations',dur:'14:32',subj:'Math',bg:G[0]},
  {title:'Understanding Photosynthesis',  dur:'11:20',subj:'Biology',bg:G[1]},
  {title:'The French Revolution',         dur:'22:45',subj:'History',bg:G[3]},
  {title:'Intro to Python Programming',   dur:'28:00',subj:'CS',bg:G[6]},
  {title:'Organic Chemistry Essentials',  dur:'18:15',subj:'Chemistry',bg:G[2]},
  {title:"Newton's Laws in Practice",     dur:'16:08',subj:'Physics',bg:G[7]},
];

function mkVids(name,n){
  return Array.from({length:n},(_,j)=>({
    title:`${name} · Part ${j+1}`,
    dur:`${4+Math.floor(Math.random()*18)}:${String(Math.floor(Math.random()*60)).padStart(2,'0')}`,
    bg:G[j%G.length], driveId:null,
  }));
}
function mkLessons(subj,n){
  return Array.from({length:n},(_,i)=>({
    num:String(i+1).padStart(2,'0'),
    name:`${subj} — Chapter ${i+1}`,
    vids:mkVids(`${subj} Ch.${i+1}`,2+Math.floor(Math.random()*6)),
  }));
}
const LESSONS={};
SUBJECTS_LIST.forEach(s=>{LESSONS[s]=mkLessons(s,4+Math.floor(Math.random()*4));});

/* ────────────────────────────────────────────────
   RENDER
──────────────────────────────────────────────── */
function renderWN(){
  document.getElementById('wnRail').innerHTML=WN_DATA.map(d=>`
    <div class="wn-card">
      <div class="wn-bg" style="background:${d.bg}"></div>
      <div class="wn-grad"></div>
      <div class="wn-body">
        <div class="wn-top">
          <div class="wn-chip ${d.cls}">${d.tag}</div>
          <button class="wn-ext"><svg width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M1 9L9 1M9 1H4M9 1V6" stroke="white" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        </div>
        <div class="wn-bottom"><h3>${d.title}</h3><p>${d.desc}</p></div>
      </div>
    </div>`).join('');
}

function renderSubjects(){
  document.getElementById('subjRail').innerHTML=SUBJECTS_LIST.map(s=>`
    <div class="subj-card" onclick="openLessons('${s}')">
      <div class="subj-shine"></div>
      <div class="subj-ico" style="background:${SUBJ_BG[s]||'var(--violet-tint)'};color:${SUBJ_CLR[s]||'var(--violet)'}">
        ${SICO[s]||SICO.Math}
      </div>
      <div class="subj-nm">${s}</div>
      <div class="subj-ct">${SUBJ_COUNTS[s]||0} lessons</div>
    </div>`).join('');
}

function renderLatest(){
  document.getElementById('vidRail').innerHTML=LATEST.map((v,i)=>`
    <div class="vid-card" onclick="openSingle(${i})">
      <div class="vid-thumb">
        <div class="vid-thumb-bg" style="background:${v.bg}"></div>
        <div class="vid-dur">${v.dur}</div>
        <div class="vid-play-ov">
          <div class="play-ring">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><polygon points="6,4 15,9 6,14" fill="var(--violet)"/></svg>
          </div>
        </div>
      </div>
      <div class="vid-body">
        <div class="vid-subj">${v.subj}</div>
        <div class="vid-title">${v.title}</div>
        <div class="vid-meta">
          <svg width="11" height="11" viewBox="0 0 11 11" fill="none"><circle cx="5.5" cy="5.5" r="4.2" stroke="currentColor" stroke-width="1.2"/><path d="M5.5 3V5.5L7 7" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>
          ${v.dur}<div class="vid-dot"></div>HD
        </div>
      </div>
    </div>`).join('');
}

/* ────────────────────────────────────────────────
   SKELETON
──────────────────────────────────────────────── */
function showSkeleton(){
  document.getElementById('wnRail').innerHTML=Array(4).fill(`<div class="skel" style="flex:0 0 min(355px,80vw);height:230px"></div>`).join('');
  document.getElementById('subjRail').innerHTML=Array(8).fill(`<div class="skel" style="flex:0 0 min(136px,33vw);aspect-ratio:1"></div>`).join('');
  document.getElementById('vidRail').innerHTML=Array(5).fill(`<div class="skel" style="flex:0 0 min(272px,75vw);height:255px"></div>`).join('');
}

/* ────────────────────────────────────────────────
   MODAL
──────────────────────────────────────────────── */
function openModal(id){document.getElementById(id).classList.add('open');document.body.style.overflow='hidden';}
function closeModal(id){
  document.getElementById(id).classList.remove('open');
  if(!document.querySelector('.backdrop.open')) document.body.style.overflow='';
}
document.querySelectorAll('.backdrop').forEach(el=>{el.addEventListener('click',e=>{if(e.target===el)closeModal(el.id);});});
document.addEventListener('keydown',e=>{if(e.key==='Escape')document.querySelectorAll('.backdrop.open').forEach(el=>closeModal(el.id));});

/* ────────────────────────────────────────────────
   LESSONS MODAL
──────────────────────────────────────────────── */
function openLessons(subj){
  const lessons=LESSONS[subj]||[];
  document.getElementById('lsn-title').textContent=subj;
  document.getElementById('lsn-sub').textContent=`${lessons.length} lessons available`;
  document.getElementById('lessonsGrid').innerHTML=lessons.map((l,i)=>`
    <div class="lsn-card" onclick="openPlayer('${subj}',${i})">
      <div class="lsn-num">Chapter ${l.num}</div>
      <div class="lsn-name">${l.name}</div>
      <div class="lsn-meta">
        <svg width="10" height="10" viewBox="0 0 10 10" fill="none"><polygon points="2,2 8,5 2,8" stroke="currentColor" stroke-width="1.2" stroke-linejoin="round"/></svg>
        ${l.vids.length} videos
        <div class="lsn-sep"></div>
        ${Math.round(l.vids.reduce((a,v)=>{const[m,s]=v.dur.split(':');return a+parseInt(m)*60+parseInt(s);},0)/60)} min
      </div>
    </div>`).join('');
  openModal('bd-lessons');
}

/* ────────────────────────────────────────────────
   VIDEO PLAYER
──────────────────────────────────────────────── */
let _lesson=null,_vi=0;

function openPlayer(subj,li){
  _lesson=LESSONS[subj][li]; _vi=0;
  setHdr(_lesson.name,subj,_lesson.vids.length);
  closeModal('bd-lessons');
  buildPL(); playVideo(0);
  openModal('bd-player');
}
function openSingle(i){
  const v=LATEST[i];
  _lesson={name:v.title,vids:[{title:v.title,dur:v.dur,bg:v.bg,driveId:null}]};
  _vi=0; setHdr(v.title,v.subj,1);
  buildPL(); playVideo(0);
  openModal('bd-player');
}
function setHdr(t,s,n){
  document.getElementById('pl-title').textContent=t;
  document.getElementById('pl-sub').textContent=`${s} · ${n} video${n!==1?'s':''}`;
  document.getElementById('plBadge').textContent=`${n}`;
}
function buildPL(){
  document.getElementById('plList').innerHTML=_lesson.vids.map((v,i)=>`
    <div class="pl-item${i===0?' active':''}" id="pli${i}" onclick="playVideo(${i})">
      <div class="pl-n">${String(i+1).padStart(2,'0')}</div>
      <div class="pl-thumb">
        <div class="pl-thumb-bg" style="background:${v.bg}"></div>
        <div class="pl-thumb-ov">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><rect x="1.5" y="1.5" width="3" height="9" rx="1" fill="white"/><rect x="7.5" y="1.5" width="3" height="9" rx="1" fill="white"/></svg>
        </div>
      </div>
      <div class="pl-info">
        <div class="pl-name">${v.title}</div>
        <div class="pl-dur">${v.dur}</div>
      </div>
    </div>`).join('');
}
function playVideo(idx){
  const vids=_lesson.vids;
  if(idx<0||idx>=vids.length)return;
  _vi=idx; const v=vids[idx];
  document.querySelectorAll('.pl-item').forEach((el,i)=>el.classList.toggle('active',i===idx));
  const pl=document.getElementById('plList');
  const it=document.getElementById('pli'+idx);
  if(it&&pl){
    const iT=it.offsetTop,iB=iT+it.offsetHeight,sT=pl.scrollTop,sC=pl.clientHeight;
    if(iT<sT) pl.scrollTo({top:iT-8,behavior:'smooth'});
    else if(iB>sT+sC) pl.scrollTo({top:iB-sC+8,behavior:'smooth'});
  }
  const frame=document.getElementById('playerFrame'),ph=document.getElementById('playerPh');
  if(v.driveId){frame.src=`https://drive.google.com/file/d/${v.driveId}/preview?autoplay=1`;frame.style.display='block';ph.style.display='none';}
  else{frame.style.display='none';frame.src='';ph.style.display='flex';}
  const m=document.getElementById('playerMeta');
  m.style.display='block';
  document.getElementById('metaTitle').textContent=v.title;
  document.getElementById('metaSub').textContent=`${_lesson.name} · ${v.dur}`;
  const bar=document.getElementById('progBar');
  bar.style.width='0%';
  setTimeout(()=>{bar.style.width=`${10+Math.round(Math.random()*65)}%`;},280);
}

/* ────────────────────────────────────────────────
   DRAWER
──────────────────────────────────────────────── */
const burger=document.getElementById('burger');
const drawer=document.getElementById('drawer');
const scrim=document.getElementById('scrim');

function toggleDrawer(force){
  const open=force!==undefined?force:!drawer.classList.contains('open');
  drawer.classList.toggle('open',open);
  scrim.classList.toggle('open',open);
  burger.classList.toggle('open',open);
  burger.setAttribute('aria-expanded',String(open));
  // close notif if opening drawer
  if(open){notifPanel.classList.remove('open');notifBtn.classList.remove('active-notif');}
}
burger.addEventListener('click',()=>toggleDrawer());
scrim.addEventListener('click',()=>toggleDrawer(false));

/* ────────────────────────────────────────────────
   MOBILE BOTTOM NAV
──────────────────────────────────────────────── */
document.querySelectorAll('.mob-nav-item').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.mob-nav-item').forEach(b=>{
      b.classList.remove('active');
      const pill=b.querySelector('.mob-nav-active-pill');
      if(pill) pill.style.display='none';
    });
    btn.classList.add('active');
    const pill=btn.querySelector('.mob-nav-active-pill');
    if(pill) pill.style.display='block';

    const page=btn.dataset.mobPage;
    if(page==='notif'){/* handled by click handler above */}
    else if(page==='home'){document.querySelector('.hero').scrollIntoView({behavior:'smooth'});}
    else if(page==='search'){document.querySelector('.hero-search input').focus();}
    else if(page==='lessons'){document.getElementById('subjects').scrollIntoView({behavior:'smooth'});}
  });
});

/* ────────────────────────────────────────────────
   SCROLL ANIMATIONS
──────────────────────────────────────────────── */
const io=new IntersectionObserver(entries=>{
  entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('vis');io.unobserve(e.target);}});
},{threshold:.07});
document.querySelectorAll('.fade-up,.stagger').forEach(el=>io.observe(el));

/* ────────────────────────────────────────────────
   INIT
──────────────────────────────────────────────── */
showSkeleton();
updateBadge();
setTimeout(()=>{
  renderWN(); renderSubjects(); renderLatest();
  document.querySelectorAll('.stagger').forEach(el=>{
    io.observe(el);
    if(el.getBoundingClientRect().top<window.innerHeight) el.classList.add('vis');
  });
},850);
</script>
</body>
</html>
