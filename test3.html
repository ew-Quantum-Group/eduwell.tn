<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sahl Library — Your Digital Sanctuary</title>
  <meta name="description" content="Sahl Library — A curated digital library. Explore timeless books, open your mind." />

  <!-- Font Awesome 6 Pro CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    /* ══════════════════════════════════════════════════
       TOKENS & RESET
    ══════════════════════════════════════════════════ */
    :root {
      --cream:     #f8f3eb;
      --cream-2:   #f0e8d8;
      --cream-3:   #e6d9c5;
      --surface:   #fffaf4;
      --ink:       #1c1208;
      --ink-2:     #3d2e18;
      --ink-3:     #7a6040;
      --amber:     #c8870a;
      --amber-2:   #e0a020;
      --rust:      #b5410c;
      --rust-light:#e8c9b0;
      --green:     #2d5a27;
      --teal:      #1a4a4a;
      --navy:      #1a1f4a;
      --plum:      #3a1a4a;
      --shadow-sm: 0 2px 10px rgba(28,18,8,.08);
      --shadow-md: 0 8px 30px rgba(28,18,8,.13);
      --shadow-lg: 0 20px 60px rgba(28,18,8,.2);
      --radius:    6px;
      --ease:      cubic-bezier(.4,0,.2,1);
      --t:         .35s;
    }
    [data-theme="dark"] {
      --cream:     #0f0b06;
      --cream-2:   #181208;
      --cream-3:   #221a0e;
      --surface:   #1a1208;
      --ink:       #f0e8d5;
      --ink-2:     #c8b898;
      --ink-3:     #8a7258;
      --amber:     #d4a030;
      --amber-2:   #e8b840;
      --rust:      #e05520;
      --rust-light:#3d2010;
      --shadow-sm: 0 2px 10px rgba(0,0,0,.25);
      --shadow-md: 0 8px 30px rgba(0,0,0,.4);
      --shadow-lg: 0 20px 60px rgba(0,0,0,.6);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Jost', sans-serif;
      background: var(--cream);
      color: var(--ink);
      overflow-x: hidden;
      transition: background .5s var(--ease), color .5s var(--ease);
      cursor: default;
    }

    /* Custom cursor */
    * { cursor: inherit; }
    button, a, [tabindex], .book-card { cursor: pointer; }

    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: var(--cream-2); }
    ::-webkit-scrollbar-thumb { background: var(--rust-light); border-radius: 99px; }

    /* ══════════════════════════════════════════════════
       NOISE TEXTURE OVERLAY
    ══════════════════════════════════════════════════ */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      opacity: .03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      background-size: 200px;
    }

    /* ══════════════════════════════════════════════════
       LANDING
    ══════════════════════════════════════════════════ */
    #landing {
      position: fixed;
      inset: 0;
      z-index: 200;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity .9s var(--ease), transform .9s var(--ease);
      overflow: hidden;
    }
    #landing.exit {
      opacity: 0;
      transform: scale(1.04);
      pointer-events: none;
    }

    /* Mesh gradient background */
    .land-bg {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 90% 70% at 15% 85%, rgba(200,135,10,.22) 0%, transparent 55%),
        radial-gradient(ellipse 70% 80% at 85% 15%, rgba(181,65,12,.18) 0%, transparent 55%),
        radial-gradient(ellipse 60% 50% at 50% 50%, rgba(26,31,74,.08) 0%, transparent 60%),
        linear-gradient(170deg, #f8f2e5 0%, #ede0c5 40%, #e5d4b0 100%);
    }
    [data-theme="dark"] .land-bg {
      background:
        radial-gradient(ellipse 90% 70% at 15% 85%, rgba(200,135,10,.15) 0%, transparent 55%),
        radial-gradient(ellipse 70% 80% at 85% 15%, rgba(181,65,12,.15) 0%, transparent 55%),
        linear-gradient(170deg, #100c06 0%, #181008 40%, #1c1408 100%);
    }

    /* Animated bokeh */
    .bokeh { position: absolute; border-radius: 50%; filter: blur(80px); animation: drift 18s ease-in-out infinite; }
    .bokeh-1 { width: 500px; height: 500px; top: -15%; left: -10%; background: rgba(200,135,10,.18); animation-duration: 20s; }
    .bokeh-2 { width: 350px; height: 350px; bottom: -10%; right: -8%; background: rgba(181,65,12,.15); animation-duration: 16s; animation-delay: -6s; }
    .bokeh-3 { width: 250px; height: 250px; top: 40%; left: 60%; background: rgba(26,80,74,.12); animation-duration: 22s; animation-delay: -12s; }
    @keyframes drift {
      0%,100% { transform: translate(0,0) scale(1); }
      33%      { transform: translate(30px,-40px) scale(1.08); }
      66%      { transform: translate(-20px,25px) scale(.93); }
    }

    /* Decorative arch */
    .land-arch {
      position: absolute;
      width: min(700px, 90vw);
      height: min(700px, 90vw);
      border-radius: 50%;
      border: 1px solid rgba(181,65,12,.12);
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      animation: pulse-arch 8s ease-in-out infinite;
    }
    .land-arch::before {
      content: '';
      position: absolute;
      inset: 30px;
      border-radius: 50%;
      border: 1px solid rgba(200,135,10,.08);
    }
    @keyframes pulse-arch { 0%,100%{opacity:.6}50%{opacity:1} }

    /* Horizontal rules */
    .land-rule {
      position: absolute;
      left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(181,65,12,.15), transparent);
    }
    .land-rule-1 { top: 18%; }
    .land-rule-2 { bottom: 18%; }

    /* Content */
    .land-content {
      position: relative;
      z-index: 5;
      text-align: center;
      padding: 2rem;
    }

    .land-badge {
      display: inline-flex;
      align-items: center;
      gap: .6rem;
      background: rgba(181,65,12,.08);
      border: 1px solid rgba(181,65,12,.2);
      border-radius: 99px;
      padding: .4rem 1.1rem;
      font-size: .68rem;
      font-weight: 500;
      letter-spacing: .22em;
      text-transform: uppercase;
      color: var(--rust);
      margin-bottom: 2.2rem;
      opacity: 0;
      animation: riseUp .8s .2s var(--ease) forwards;
    }
    .land-badge i { font-size: .75rem; }

    .land-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(4.5rem, 12vw, 9rem);
      font-weight: 400;
      line-height: .92;
      letter-spacing: -.02em;
      color: var(--ink);
      margin-bottom: .25em;
      opacity: 0;
      animation: riseUp .9s .4s var(--ease) forwards;
    }
    .land-title-italic {
      font-style: italic;
      color: var(--rust);
      display: block;
    }

    .land-divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 1.8rem auto;
      opacity: 0;
      animation: riseUp .8s .6s var(--ease) forwards;
    }
    .land-divider::before, .land-divider::after {
      content: '';
      width: 80px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--ink-3));
    }
    .land-divider::after { background: linear-gradient(90deg, var(--ink-3), transparent); }
    .land-divider i { color: var(--amber); font-size: .9rem; }

    .land-sub {
      font-size: 1rem;
      font-weight: 300;
      line-height: 1.75;
      color: var(--ink-3);
      max-width: 460px;
      margin: 0 auto 3rem;
      opacity: 0;
      animation: riseUp .8s .7s var(--ease) forwards;
    }

    .land-cta {
      display: inline-flex;
      align-items: center;
      gap: .9rem;
      padding: 1.05rem 2.4rem 1.05rem 2rem;
      background: var(--ink);
      color: var(--cream);
      font-family: 'Jost', sans-serif;
      font-size: .82rem;
      font-weight: 500;
      letter-spacing: .1em;
      text-transform: uppercase;
      border-radius: 3px;
      border: 1.5px solid var(--ink);
      position: relative;
      overflow: hidden;
      transition: color .4s, background .4s, transform .3s, box-shadow .3s;
      opacity: 0;
      animation: riseUp .8s .9s var(--ease) forwards;
    }
    .land-cta::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--rust);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform .45s var(--ease);
    }
    .land-cta:hover { transform: translateY(-3px); box-shadow: 0 16px 48px rgba(181,65,12,.3); border-color: var(--rust); }
    .land-cta:hover::before { transform: scaleX(1); }
    .land-cta span, .land-cta i { position: relative; z-index: 1; }
    .land-cta .cta-icon { transition: transform .3s; }
    .land-cta:hover .cta-icon { transform: translateX(5px); }

    .land-scroll-hint {
      position: absolute;
      bottom: 2.5rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: .4rem;
      font-size: .62rem;
      letter-spacing: .2em;
      text-transform: uppercase;
      color: var(--ink-3);
      opacity: 0;
      animation: riseUp .8s 1.2s var(--ease) forwards;
    }
    .land-scroll-hint i { animation: bounce 2s ease-in-out infinite; color: var(--rust); }
    @keyframes bounce { 0%,100%{transform:translateY(0)}50%{transform:translateY(5px)} }

    /* ══════════════════════════════════════════════════
       LIBRARY PAGE
    ══════════════════════════════════════════════════ */
    #library {
      min-height: 100vh;
      opacity: 0;
      transform: translateY(16px);
      transition: opacity .8s .15s var(--ease), transform .8s .15s var(--ease);
      pointer-events: none;
      position: relative;
      z-index: 1;
    }
    #library.show { opacity: 1; transform: none; pointer-events: all; }

    /* ── HEADER ── */
    .hdr {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 3rem;
      height: 68px;
      background: var(--cream);
      border-bottom: 1px solid var(--cream-3);
      transition: background .5s, border-color .5s;
    }
    .hdr::after {
      content: '';
      position: absolute;
      bottom: -1px; left: 3rem; right: 3rem;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--amber), transparent);
      opacity: .3;
    }

    .hdr-logo {
      display: flex; align-items: center; gap: .7rem;
      font-family: 'Playfair Display', serif;
      font-size: 1.35rem;
      font-weight: 500;
      color: var(--ink);
      text-decoration: none;
    }
    .hdr-logo-icon {
      width: 34px; height: 34px;
      background: var(--ink);
      border-radius: 4px;
      display: flex; align-items: center; justify-content: center;
      color: var(--cream);
      font-size: .85rem;
      transition: background .3s;
    }
    .hdr-logo:hover .hdr-logo-icon { background: var(--rust); }
    .hdr-logo-dot { color: var(--amber); }

    .hdr-center {
      display: flex; align-items: center;
      position: absolute; left: 50%; transform: translateX(-50%);
    }

    .hdr-nav {
      display: flex; gap: .2rem;
    }
    .hdr-nav-link {
      display: flex; align-items: center; gap: .45rem;
      padding: .45rem .9rem;
      border-radius: 4px;
      font-size: .78rem;
      font-weight: 500;
      letter-spacing: .04em;
      color: var(--ink-3);
      transition: background .2s, color .2s;
    }
    .hdr-nav-link i { font-size: .75rem; }
    .hdr-nav-link:hover { background: var(--cream-2); color: var(--ink); }
    .hdr-nav-link.active { color: var(--rust); background: rgba(181,65,12,.06); }

    .hdr-right { display: flex; align-items: center; gap: .6rem; }

    .hdr-search {
      display: flex; align-items: center;
      background: var(--cream-2);
      border: 1px solid var(--cream-3);
      border-radius: 5px;
      padding: .5rem .9rem .5rem .75rem;
      gap: .6rem;
      transition: border-color .25s, box-shadow .25s;
    }
    .hdr-search:focus-within { border-color: var(--amber); box-shadow: 0 0 0 3px rgba(200,135,10,.12); }
    .hdr-search i { color: var(--ink-3); font-size: .8rem; flex-shrink: 0; }
    .hdr-search input {
      background: none; border: none; outline: none;
      font-family: 'Jost', sans-serif; font-size: .82rem;
      color: var(--ink); width: 185px;
    }
    .hdr-search input::placeholder { color: var(--ink-3); }

    .icon-btn {
      width: 38px; height: 38px;
      border-radius: 5px;
      border: 1px solid var(--cream-3);
      background: var(--cream-2);
      color: var(--ink-3);
      display: flex; align-items: center; justify-content: center;
      font-size: .85rem;
      transition: color .25s, border-color .25s, background .25s, transform .2s;
    }
    .icon-btn:hover { color: var(--rust); border-color: var(--rust); background: rgba(181,65,12,.05); transform: scale(1.05); }

    /* ── HERO STRIP ── */
    .hero-strip {
      background: var(--ink);
      padding: 5rem 3rem 4.5rem;
      position: relative;
      overflow: hidden;
    }
    [data-theme="dark"] .hero-strip { background: var(--cream-2); }

    .hero-strip-bg {
      position: absolute; inset: 0;
      background:
        radial-gradient(ellipse 60% 100% at 100% 50%, rgba(200,135,10,.12) 0%, transparent 60%),
        radial-gradient(ellipse 40% 60% at 0% 80%, rgba(181,65,12,.1) 0%, transparent 55%);
    }
    .hero-strip-pattern {
      position: absolute; inset: 0;
      opacity: .04;
      background-image: repeating-linear-gradient(
        0deg, transparent, transparent 39px,
        rgba(255,255,255,.3) 39px, rgba(255,255,255,.3) 40px
      ),
      repeating-linear-gradient(
        90deg, transparent, transparent 39px,
        rgba(255,255,255,.3) 39px, rgba(255,255,255,.3) 40px
      );
    }

    .hero-inner {
      max-width: 1360px; margin: 0 auto;
      display: grid; grid-template-columns: 1fr auto;
      align-items: center; gap: 3rem;
    }

    .hero-eyebrow {
      display: inline-flex; align-items: center; gap: .6rem;
      font-size: .66rem; letter-spacing: .22em; text-transform: uppercase;
      color: var(--amber); margin-bottom: 1.2rem;
    }
    .hero-eyebrow i { font-size: .7rem; }
    .hero-eyebrow::after { content: ''; display: block; width: 40px; height: 1px; background: var(--amber); opacity: .5; }

    .hero-h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.4rem, 5vw, 4.2rem);
      font-weight: 400; line-height: 1.08;
      color: var(--cream);
    }
    [data-theme="dark"] .hero-h1 { color: var(--ink); }
    .hero-h1 em { font-style: italic; color: var(--amber-2); }

    .hero-desc {
      margin-top: 1.2rem;
      font-size: .9rem; font-weight: 300; line-height: 1.8;
      color: rgba(248,243,235,.55);
      max-width: 420px;
    }
    [data-theme="dark"] .hero-desc { color: var(--ink-3); }

    .hero-stats {
      display: grid; grid-template-columns: repeat(3,1fr);
      gap: 2px;
      flex-shrink: 0;
      border: 1px solid rgba(255,255,255,.1);
      border-radius: 6px;
      overflow: hidden;
      background: rgba(255,255,255,.05);
      min-width: 280px;
    }
    [data-theme="dark"] .hero-stats { border-color: var(--cream-3); background: var(--cream-3); }

    .stat-cell {
      padding: 1.4rem 1.2rem;
      text-align: center;
      background: rgba(255,255,255,.03);
      border-right: 1px solid rgba(255,255,255,.06);
    }
    [data-theme="dark"] .stat-cell { background: var(--cream-2); border-color: var(--cream-3); }
    .stat-cell:last-child { border-right: none; }

    .stat-icon {
      width: 36px; height: 36px;
      border-radius: 8px;
      background: rgba(200,135,10,.15);
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto .7rem;
      font-size: .85rem;
      color: var(--amber-2);
    }
    .stat-num {
      font-family: 'Playfair Display', serif;
      font-size: 2rem; font-weight: 500;
      color: var(--cream); line-height: 1;
    }
    [data-theme="dark"] .stat-num { color: var(--ink); }
    .stat-lbl {
      font-size: .63rem; letter-spacing: .14em; text-transform: uppercase;
      color: rgba(248,243,235,.4); margin-top: .3rem;
    }
    [data-theme="dark"] .stat-lbl { color: var(--ink-3); }

    /* ── FILTER BAR ── */
    .filter-bar {
      display: flex; align-items: center; justify-content: space-between;
      padding: 1.2rem 3rem;
      border-bottom: 1px solid var(--cream-3);
      gap: 1rem;
      flex-wrap: wrap;
    }

    .cat-tabs { display: flex; gap: .4rem; flex-wrap: wrap; }

    .cat-tab {
      display: inline-flex; align-items: center; gap: .5rem;
      padding: .48rem 1rem;
      border-radius: 4px;
      border: 1px solid transparent;
      font-family: 'Jost', sans-serif;
      font-size: .76rem; font-weight: 500;
      letter-spacing: .05em;
      color: var(--ink-3);
      background: transparent;
      transition: all .22s;
    }
    .cat-tab i { font-size: .72rem; }
    .cat-tab:hover { background: var(--cream-2); border-color: var(--cream-3); color: var(--ink); }
    .cat-tab.on {
      background: var(--ink); color: var(--cream); border-color: var(--ink);
    }
    [data-theme="dark"] .cat-tab.on { background: var(--rust); border-color: var(--rust); }

    .view-toggles { display: flex; gap: .35rem; }
    .view-btn {
      width: 34px; height: 34px;
      border-radius: 4px;
      border: 1px solid var(--cream-3);
      background: transparent;
      color: var(--ink-3);
      display: flex; align-items: center; justify-content: center;
      font-size: .8rem;
      transition: all .2s;
    }
    .view-btn.on { background: var(--ink); color: var(--cream); border-color: var(--ink); }
    [data-theme="dark"] .view-btn.on { background: var(--rust); border-color: var(--rust); }

    /* ── BOOKS GRID ── */
    .books-wrap {
      max-width: 1360px;
      margin: 0 auto;
      padding: 2.5rem 3rem 5rem;
    }

    .books-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(196px, 1fr));
      gap: 2.2rem 1.8rem;
      transition: all .4s;
    }
    .books-grid.list-view {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    /* ── BOOK CARD (grid) ── */
    .book-card {
      position: relative;
      opacity: 0;
      transform: translateY(18px);
      animation: cardUp .55s var(--ease) forwards;
      transition: transform .38s var(--ease);
    }
    @keyframes cardUp { to { opacity:1; transform:none; } }

    .book-card:hover { transform: translateY(-10px) rotate(-.4deg); }
    .book-card:hover .book-cover-wrap { filter: drop-shadow(-6px 18px 45px rgba(28,18,8,.28)); }
    .book-card:hover .book-badge { opacity: 1; transform: translateY(0); }

    .book-cover-wrap {
      display: flex;
      height: 290px;
      filter: drop-shadow(-4px 8px 22px var(--shadow-md));
      transition: filter .38s;
    }

    .book-spine {
      width: 24px; border-radius: 4px 0 0 4px; flex-shrink: 0;
      position: relative; overflow: hidden;
    }
    .book-spine::after {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(90deg, rgba(0,0,0,.3), rgba(0,0,0,.05), rgba(0,0,0,.25));
    }

    .book-face {
      flex: 1;
      border-radius: 0 5px 5px 0;
      position: relative; overflow: hidden;
      display: flex; flex-direction: column;
      justify-content: space-between;
      padding: 1.25rem 1.1rem 1.1rem;
    }
    /* Shine layer */
    .book-face::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 50%;
      background: linear-gradient(to bottom, rgba(255,255,255,.14), transparent);
      pointer-events: none;
    }
    /* Right-edge shadow */
    .book-face::after {
      content: '';
      position: absolute; top: 0; right: 0; bottom: 0; width: 6px;
      background: linear-gradient(90deg, transparent, rgba(0,0,0,.18));
    }

    /* Dot grid pattern on cover */
    .cover-dots {
      position: absolute; inset: 0; opacity: .09;
      background-image: radial-gradient(circle, #fff 1px, transparent 1px);
      background-size: 16px 16px;
    }

    .cover-top { position: relative; z-index: 1; }
    .cover-cat-tag {
      display: inline-flex; align-items: center; gap: .35rem;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.2);
      border-radius: 3px;
      padding: .2rem .55rem;
      font-size: .58rem;
      font-weight: 600;
      letter-spacing: .16em;
      text-transform: uppercase;
      color: rgba(255,255,255,.85);
      backdrop-filter: blur(4px);
    }
    .cover-cat-tag i { font-size: .6rem; }

    .cover-mid {
      position: relative; z-index: 1;
      display: flex; align-items: center; justify-content: center;
    }
    .cover-icon-wrap {
      width: 52px; height: 52px;
      border-radius: 50%;
      background: rgba(255,255,255,.12);
      border: 1px solid rgba(255,255,255,.2);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.4rem;
      color: #fff;
      backdrop-filter: blur(6px);
    }

    .cover-bot { position: relative; z-index: 1; }
    .cover-title {
      font-family: 'Playfair Display', serif;
      font-size: .97rem; font-weight: 500;
      color: #fff; line-height: 1.2;
    }
    .cover-author {
      font-size: .62rem; font-weight: 400;
      color: rgba(255,255,255,.6);
      margin-top: .3rem;
    }

    /* Book badge (hover) */
    .book-badge {
      position: absolute;
      top: 10px; right: -5px;
      background: var(--amber);
      color: #fff;
      font-size: .6rem; font-weight: 600; letter-spacing: .1em;
      text-transform: uppercase;
      padding: .3rem .6rem;
      border-radius: 3px;
      opacity: 0;
      transform: translateY(-4px);
      transition: opacity .3s, transform .3s;
      pointer-events: none;
      box-shadow: 0 4px 12px rgba(200,135,10,.35);
    }

    .book-meta {
      padding: .9rem .3rem .3rem;
    }
    .book-meta-title {
      font-family: 'Playfair Display', serif;
      font-size: 1rem; font-weight: 500;
      color: var(--ink); line-height: 1.25;
    }
    .book-meta-row {
      display: flex; align-items: center; justify-content: space-between;
      margin-top: .45rem;
    }
    .book-meta-author {
      font-size: .7rem; color: var(--ink-3);
      display: flex; align-items: center; gap: .35rem;
    }
    .book-meta-author i { font-size: .65rem; color: var(--amber); }
    .book-meta-pages {
      display: flex; align-items: center; gap: .3rem;
      font-size: .65rem; color: var(--ink-3);
    }
    .book-meta-pages i { font-size: .6rem; }

    /* Open button (hover) */
    .book-open-btn {
      display: flex; align-items: center; justify-content: center; gap: .5rem;
      width: 100%;
      margin-top: .65rem;
      padding: .58rem;
      background: var(--cream-2);
      border: 1px solid var(--cream-3);
      border-radius: 4px;
      font-family: 'Jost', sans-serif;
      font-size: .72rem; font-weight: 500; letter-spacing: .08em;
      text-transform: uppercase; color: var(--ink-3);
      transition: all .25s;
    }
    .book-open-btn i { font-size: .7rem; transition: transform .25s; }
    .book-card:hover .book-open-btn {
      background: var(--ink); color: var(--cream); border-color: var(--ink);
    }
    [data-theme="dark"] .book-card:hover .book-open-btn { background: var(--rust); border-color: var(--rust); }
    .book-card:hover .book-open-btn i { transform: translateX(3px); }

    /* ── LIST VIEW ── */
    .books-grid.list-view .book-card {
      transform: none !important; rotate: none !important;
    }
    .books-grid.list-view .book-card:hover { transform: none !important; }
    .books-grid.list-view .book-card-inner {
      display: flex; align-items: center; gap: 1.5rem;
      background: var(--surface);
      border: 1px solid var(--cream-3);
      border-radius: 6px;
      padding: 1rem 1.4rem 1rem 1rem;
      transition: box-shadow .25s, border-color .25s;
    }
    .books-grid.list-view .book-card:hover .book-card-inner {
      box-shadow: var(--shadow-md);
      border-color: var(--amber);
    }
    .books-grid.list-view .book-cover-wrap {
      height: 90px; flex-shrink: 0;
      filter: drop-shadow(-2px 4px 10px var(--shadow-sm));
    }
    .books-grid.list-view .book-spine { width: 14px; }
    .books-grid.list-view .book-face { padding: .6rem .7rem; border-radius: 0 4px 4px 0; }
    .books-grid.list-view .cover-dots { background-size: 10px 10px; }
    .books-grid.list-view .cover-cat-tag,
    .books-grid.list-view .cover-mid { display: none; }
    .books-grid.list-view .cover-top { margin-bottom: auto; }
    .books-grid.list-view .cover-title { font-size: .8rem; }
    .books-grid.list-view .cover-author { font-size: .58rem; }
    .books-grid.list-view .book-meta { flex: 1; padding: 0; }
    .books-grid.list-view .book-meta-title { font-size: 1.05rem; }
    .books-grid.list-view .book-badge { display: none; }
    .books-grid.list-view .book-open-btn {
      width: auto; margin: 0; padding: .5rem 1.2rem;
      background: var(--ink); color: var(--cream); border-color: var(--ink);
      flex-shrink: 0;
    }
    [data-theme="dark"] .books-grid.list-view .book-open-btn { background: var(--rust); border-color: var(--rust); }

    /* ── NO RESULTS ── */
    .empty-state {
      display: none;
      text-align: center;
      padding: 6rem 2rem;
    }
    .empty-state.show { display: block; }
    .empty-icon {
      width: 80px; height: 80px;
      border-radius: 50%;
      background: var(--cream-2);
      border: 1px solid var(--cream-3);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.8rem; color: var(--ink-3);
      margin: 0 auto 1.5rem;
    }
    .empty-state h3 {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem; font-weight: 400; color: var(--ink);
    }
    .empty-state p { font-size: .85rem; color: var(--ink-3); margin-top: .5rem; }

    /* ══════════════════════════════════════════════════
       MODAL
    ══════════════════════════════════════════════════ */
    .overlay {
      position: fixed; inset: 0; z-index: 500;
      background: rgba(10,7,3,.6);
      backdrop-filter: blur(10px) saturate(1.2);
      display: flex; align-items: center; justify-content: center;
      padding: 1.5rem;
      opacity: 0; pointer-events: none;
      transition: opacity .45s var(--ease);
    }
    .overlay.open { opacity: 1; pointer-events: all; }

    .modal {
      background: var(--surface);
      border: 1px solid var(--cream-3);
      border-radius: 8px;
      width: 100%; max-width: 960px;
      max-height: 92vh;
      display: flex; flex-direction: column;
      overflow: hidden;
      transform: scale(.92) translateY(24px);
      transition: transform .5s cubic-bezier(.2,0,.05,1);
      box-shadow: 0 40px 100px rgba(10,7,3,.45), 0 0 0 1px rgba(255,255,255,.05);
    }
    .overlay.open .modal { transform: scale(1) translateY(0); }

    .modal-hdr {
      display: flex; align-items: center; gap: 1.25rem;
      padding: 1.1rem 1.6rem;
      background: var(--cream-2);
      border-bottom: 1px solid var(--cream-3);
      flex-shrink: 0;
    }

    .modal-hdr-thumb {
      width: 50px; height: 68px;
      border-radius: 3px;
      flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.3rem; color: #fff;
      position: relative; overflow: hidden;
      box-shadow: -3px 4px 14px rgba(0,0,0,.2);
    }
    .modal-hdr-thumb::before {
      content: '';
      position: absolute; top: 0; left: 0; bottom: 0; width: 8px;
      background: rgba(0,0,0,.25);
    }

    .modal-hdr-info { flex: 1; min-width: 0; }
    .modal-eyebrow {
      display: flex; align-items: center; gap: .45rem;
      font-size: .63rem; letter-spacing: .18em; text-transform: uppercase;
      color: var(--rust); margin-bottom: .2rem;
    }
    .modal-eyebrow i { font-size: .65rem; }
    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.35rem; font-weight: 500;
      color: var(--ink); white-space: nowrap;
      overflow: hidden; text-overflow: ellipsis;
    }
    .modal-author-line {
      font-size: .76rem; color: var(--ink-3); margin-top: .15rem;
      display: flex; align-items: center; gap: .4rem;
    }
    .modal-author-line i { font-size: .7rem; color: var(--amber); }

    .modal-actions { display: flex; gap: .5rem; flex-shrink: 0; }

    .modal-btn {
      display: flex; align-items: center; gap: .5rem;
      padding: .5rem 1rem;
      border-radius: 4px;
      border: 1px solid var(--cream-3);
      background: var(--surface);
      color: var(--ink-3);
      font-family: 'Jost', sans-serif;
      font-size: .74rem; font-weight: 500;
      transition: all .22s;
    }
    .modal-btn:hover { border-color: var(--amber); color: var(--ink); background: var(--cream-2); }
    .modal-btn i { font-size: .75rem; }
    .modal-btn.close-btn:hover { border-color: var(--rust); color: var(--rust); }

    .modal-body {
      flex: 1; position: relative; overflow: hidden;
      min-height: 400px;
    }

    /* Loader */
    .pdf-loader {
      position: absolute; inset: 0;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 1.5rem;
      background: var(--surface);
      z-index: 10;
      transition: opacity .4s;
    }
    .pdf-loader.done { opacity: 0; pointer-events: none; }

    .loader-book {
      position: relative;
      width: 60px; height: 70px;
    }
    .loader-book-spine {
      position: absolute; left: 0; top: 0; bottom: 0; width: 12px;
      background: var(--amber);
      border-radius: 3px 0 0 3px;
    }
    .loader-book-page {
      position: absolute; left: 12px; right: 0; top: 0; bottom: 0;
      background: var(--cream-2);
      border: 1px solid var(--cream-3);
      border-left: none;
      border-radius: 0 3px 3px 0;
      overflow: hidden;
      display: flex; flex-direction: column;
      justify-content: center; gap: 5px;
      padding: 10px 8px;
    }
    .loader-line {
      height: 3px; border-radius: 2px;
      background: var(--cream-3);
      animation: lineLoad 1.2s ease-in-out infinite;
    }
    .loader-line:nth-child(1) { width: 80%; animation-delay: 0s; }
    .loader-line:nth-child(2) { width: 65%; animation-delay: .15s; }
    .loader-line:nth-child(3) { width: 75%; animation-delay: .3s; }
    .loader-line:nth-child(4) { width: 55%; animation-delay: .45s; }
    @keyframes lineLoad { 0%,100%{opacity:.3}50%{opacity:1} }

    .loader-flip {
      position: absolute;
      right: 0; top: 0; bottom: 0;
      width: 30px;
      background: var(--cream-3);
      transform-origin: right center;
      animation: flipPage 1.6s ease-in-out infinite;
      border-radius: 0 3px 3px 0;
    }
    @keyframes flipPage {
      0%,100% { transform: scaleX(1); opacity: .7; }
      50% { transform: scaleX(0); opacity: .2; }
    }

    .loader-msg {
      font-size: .75rem; letter-spacing: .1em; text-transform: uppercase;
      color: var(--ink-3);
    }
    .loader-dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }
    @keyframes dots { 0%{content:''}25%{content:'.'}50%{content:'..'}75%,100%{content:'...'} }

    .pdf-iframe {
      width: 100%; border: none; display: block;
      height: min(75vh, 680px);
    }

    /* ══════════════════════════════════════════════════
       FOOTER
    ══════════════════════════════════════════════════ */
    .lib-footer {
      border-top: 1px solid var(--cream-3);
      padding: 2rem 3rem;
      display: flex; align-items: center; justify-content: space-between;
      flex-wrap: wrap; gap: 1rem;
    }
    .footer-brand {
      display: flex; align-items: center; gap: .6rem;
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem; color: var(--ink-3);
    }
    .footer-brand i { color: var(--amber); }
    .footer-copy { font-size: .72rem; letter-spacing: .06em; color: var(--ink-3); }
    .footer-copy span { color: var(--rust); }
    .footer-links { display: flex; gap: 1rem; }
    .footer-link {
      font-size: .72rem; letter-spacing: .06em; text-transform: uppercase;
      color: var(--ink-3);
      display: flex; align-items: center; gap: .35rem;
      transition: color .2s;
    }
    .footer-link i { font-size: .7rem; }
    .footer-link:hover { color: var(--rust); }

    /* ══════════════════════════════════════════════════
       ANIMATIONS
    ══════════════════════════════════════════════════ */
    @keyframes riseUp {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: none; }
    }

    /* ══════════════════════════════════════════════════
       RESPONSIVE
    ══════════════════════════════════════════════════ */
    @media (max-width: 1024px) {
      .hdr-center { display: none; }
      .hdr { padding: 0 1.8rem; }
      .hero-strip { padding: 3.5rem 1.8rem 3rem; }
      .hero-inner { grid-template-columns: 1fr; }
      .hero-stats { min-width: 0; grid-template-columns: repeat(3,1fr); }
      .filter-bar { padding: 1rem 1.8rem; }
      .books-wrap { padding: 2rem 1.8rem 4rem; }
      .lib-footer { padding: 1.5rem 1.8rem; }
    }
    @media (max-width: 680px) {
      .hdr-search { display: none; }
      .books-grid { grid-template-columns: repeat(2,1fr); gap: 1.5rem 1rem; }
      .stat-cell { padding: 1rem .8rem; }
      .modal-actions .modal-btn span { display: none; }
      .lib-footer { flex-direction: column; text-align: center; }
    }
    @media (max-width: 440px) {
      .books-grid {
        display: flex; flex-direction: row;
        overflow-x: auto; scroll-snap-type: x mandatory;
        gap: 1rem; padding-bottom: 1rem;
        scrollbar-width: none;
      }
      .books-grid::-webkit-scrollbar { display: none; }
      .book-card { flex: 0 0 190px; scroll-snap-align: start; }
    }
  </style>
</head>
<body>

<!-- ════════════════════════════════════════════
     LANDING
════════════════════════════════════════════ -->
<section id="landing" aria-label="Sahl Library Welcome">
  <div class="land-bg"></div>
  <div class="bokeh bokeh-1"></div>
  <div class="bokeh bokeh-2"></div>
  <div class="bokeh bokeh-3"></div>
  <div class="land-arch"></div>
  <div class="land-rule land-rule-1"></div>
  <div class="land-rule land-rule-2"></div>

  <div class="land-content">
    <div class="land-badge">
      <i class="fas fa-book-open"></i>
      Digital Library Platform
    </div>

    <h1 class="land-title">
      Sahl
      <span class="land-title-italic">Library</span>
    </h1>

    <div class="land-divider">
      <i class="fas fa-feather-pointed"></i>
    </div>

    <p class="land-sub">
      A curated sanctuary for curious minds.<br>
      Discover timeless knowledge — beautifully presented,<br>
      always within reach.
    </p>

    <button class="land-cta" id="discoverBtn">
      <i class="fas fa-compass"></i>
      <span>Explore the Collection</span>
      <i class="fas fa-arrow-right cta-icon"></i>
    </button>
  </div>

  <div class="land-scroll-hint">
    <span>Begin</span>
    <i class="fas fa-chevron-down"></i>
  </div>
</section>

<!-- ════════════════════════════════════════════
     LIBRARY
════════════════════════════════════════════ -->
<div id="library">

  <!-- HEADER -->
  <header class="hdr">
    <a href="#" class="hdr-logo" aria-label="Sahl Library home">
      <div class="hdr-logo-icon"><i class="fas fa-book-bookmark"></i></div>
      Sahl<span class="hdr-logo-dot">.</span>
    </a>

    <nav class="hdr-center" aria-label="Primary navigation">
      <div class="hdr-nav">
        <a href="#" class="hdr-nav-link active"><i class="fas fa-layer-group"></i> Collection</a>
        <a href="#" class="hdr-nav-link"><i class="fas fa-star"></i> Featured</a>
        <a href="#" class="hdr-nav-link"><i class="fas fa-clock-rotate-left"></i> Recent</a>
        <a href="#" class="hdr-nav-link"><i class="fas fa-heart"></i> Saved</a>
      </div>
    </nav>

    <div class="hdr-right">
      <label class="hdr-search" aria-label="Search books">
        <i class="fas fa-magnifying-glass"></i>
        <input type="search" id="searchInput" placeholder="Search title, author…" autocomplete="off" />
      </label>
      <button class="icon-btn" id="themeBtn" aria-label="Toggle theme" title="Toggle dark mode">
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
      <button class="icon-btn" aria-label="Notifications" title="Notifications">
        <i class="fas fa-bell"></i>
      </button>
    </div>
  </header>

  <!-- HERO STRIP -->
  <div class="hero-strip">
    <div class="hero-strip-bg"></div>
    <div class="hero-strip-pattern"></div>
    <div class="hero-inner">
      <div>
        <div class="hero-eyebrow">
          <i class="fas fa-landmark"></i>
          Sahl Library Collection
        </div>
        <h1 class="hero-h1">
          Where Every Page<br>
          <em>Tells a Story</em>
        </h1>
        <p class="hero-desc">
          Immerse yourself in our carefully curated digital library. From ancient philosophy to modern technology — knowledge awaits at every turn.
        </p>
      </div>
      <div class="hero-stats" aria-label="Library statistics">
        <div class="stat-cell">
          <div class="stat-icon"><i class="fas fa-books"></i></div>
          <div class="stat-num" id="bookCountStat">12</div>
          <div class="stat-lbl">Books</div>
        </div>
        <div class="stat-cell">
          <div class="stat-icon"><i class="fas fa-tags"></i></div>
          <div class="stat-num">6</div>
          <div class="stat-lbl">Genres</div>
        </div>
        <div class="stat-cell">
          <div class="stat-icon"><i class="fas fa-infinity"></i></div>
          <div class="stat-num">∞</div>
          <div class="stat-lbl">Growth</div>
        </div>
      </div>
    </div>
  </div>

  <!-- FILTER BAR -->
  <div class="filter-bar">
    <div class="cat-tabs" id="catTabs" role="tablist" aria-label="Filter by category">
      <button class="cat-tab on" data-cat="all" role="tab" aria-selected="true">
        <i class="fas fa-border-all"></i> All
      </button>
      <button class="cat-tab" data-cat="philosophy" role="tab">
        <i class="fas fa-brain"></i> Philosophy
      </button>
      <button class="cat-tab" data-cat="science" role="tab">
        <i class="fas fa-flask"></i> Science
      </button>
      <button class="cat-tab" data-cat="history" role="tab">
        <i class="fas fa-scroll"></i> History
      </button>
      <button class="cat-tab" data-cat="literature" role="tab">
        <i class="fas fa-feather"></i> Literature
      </button>
      <button class="cat-tab" data-cat="technology" role="tab">
        <i class="fas fa-microchip"></i> Technology
      </button>
      <button class="cat-tab" data-cat="psychology" role="tab">
        <i class="fas fa-head-side-brain"></i> Psychology
      </button>
    </div>
    <div class="view-toggles" role="group" aria-label="View mode">
      <button class="view-btn on" id="gridViewBtn" aria-label="Grid view" title="Grid view">
        <i class="fas fa-grid-2"></i>
      </button>
      <button class="view-btn" id="listViewBtn" aria-label="List view" title="List view">
        <i class="fas fa-list"></i>
      </button>
    </div>
  </div>

  <!-- BOOKS -->
  <div class="books-wrap">
    <div class="books-grid" id="booksGrid" role="list" aria-label="Book collection"></div>
    <div class="empty-state" id="emptyState" aria-live="polite">
      <div class="empty-icon"><i class="fas fa-books-medical"></i></div>
      <h3>No books found</h3>
      <p>Try adjusting your search or selecting a different category.</p>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="lib-footer">
    <div class="footer-brand">
      <i class="fas fa-book-bookmark"></i>
      Sahl Library
    </div>
    <div class="footer-copy"><span>Knowledge</span> is the light of the mind &mdash; &copy; 2025</div>
    <div class="footer-links">
      <a href="#" class="footer-link"><i class="fas fa-circle-info"></i> About</a>
      <a href="#" class="footer-link"><i class="fas fa-envelope"></i> Contact</a>
      <a href="#" class="footer-link"><i class="fas fa-shield-halved"></i> Privacy</a>
    </div>
  </footer>
</div>

<!-- ════════════════════════════════════════════
     MODAL
════════════════════════════════════════════ -->
<div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal" id="modal">
    <div class="modal-hdr">
      <div class="modal-hdr-thumb" id="modalThumb">
        <div class="cover-dots"></div>
      </div>
      <div class="modal-hdr-info">
        <div class="modal-eyebrow">
          <i class="fas fa-book-open-reader"></i>
          <span id="modalCat">Category</span>
        </div>
        <div class="modal-title" id="modalTitle">Book Title</div>
        <div class="modal-author-line">
          <i class="fas fa-user-pen"></i>
          <span id="modalAuthor">Author</span>
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn" aria-label="Bookmark this book">
          <i class="far fa-bookmark"></i>
          <span>Save</span>
        </button>
        <button class="modal-btn" aria-label="Share this book">
          <i class="fas fa-share-nodes"></i>
          <span>Share</span>
        </button>
        <button class="modal-btn close-btn" id="modalClose" aria-label="Close reader">
          <i class="fas fa-xmark"></i>
          <span>Close</span>
        </button>
      </div>
    </div>
    <div class="modal-body">
      <div class="pdf-loader" id="pdfLoader">
        <div class="loader-book">
          <div class="loader-book-spine"></div>
          <div class="loader-book-page">
            <div class="loader-line"></div>
            <div class="loader-line"></div>
            <div class="loader-line"></div>
            <div class="loader-line"></div>
          </div>
          <div class="loader-flip"></div>
        </div>
        <div class="loader-msg">Opening your book<span class="loader-dots"></span></div>
      </div>
      <iframe id="pdfFrame" class="pdf-iframe" title="Book PDF Viewer" src="about:blank" loading="lazy"></iframe>
    </div>
  </div>
</div>

<!-- ════════════════════════════════════════════
     JAVASCRIPT
════════════════════════════════════════════ -->
<script>
/* ══════════════════════════════
   BOOK DATA
   Replace pdf URLs with:
   https://drive.google.com/file/d/YOUR_FILE_ID/preview
══════════════════════════════ */
const BOOKS = [
  {
    id:1, title:"Meditations", author:"Marcus Aurelius",
    category:"philosophy", pages:"254", faIcon:"fa-person-thinking",
    spine:"#2e1c10", cover:"linear-gradient(160deg,#6b3d22,#3d2010)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:2, title:"A Brief History of Time", author:"Stephen Hawking",
    category:"science", pages:"212", faIcon:"fa-galaxy",
    spine:"#0c1628", cover:"linear-gradient(160deg,#1a2e5a,#0c1628)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:3, title:"Sapiens", author:"Yuval Noah Harari",
    category:"history", pages:"443", faIcon:"fa-landmark-dome",
    spine:"#1e0e06", cover:"linear-gradient(160deg,#7a3510,#1e0e06)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:4, title:"1984", author:"George Orwell",
    category:"literature", pages:"328", faIcon:"fa-eye",
    spine:"#141414", cover:"linear-gradient(160deg,#363636,#141414)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:5, title:"The Art of War", author:"Sun Tzu",
    category:"philosophy", pages:"96", faIcon:"fa-chess-king",
    spine:"#160606", cover:"linear-gradient(160deg,#7a0808,#160606)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:6, title:"Thinking, Fast & Slow", author:"Daniel Kahneman",
    category:"psychology", pages:"499", faIcon:"fa-brain",
    spine:"#0e1e0e", cover:"linear-gradient(160deg,#255224,#0e1e0e)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:7, title:"The Origin of Species", author:"Charles Darwin",
    category:"science", pages:"502", faIcon:"fa-seedling",
    spine:"#0a1e0a", cover:"linear-gradient(160deg,#1a4820,#0a1e0a)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:8, title:"The Great Gatsby", author:"F. Scott Fitzgerald",
    category:"literature", pages:"180", faIcon:"fa-martini-glass-citrus",
    spine:"#1a1006", cover:"linear-gradient(160deg,#c9922a,#1a1006)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:9, title:"Atomic Habits", author:"James Clear",
    category:"psychology", pages:"320", faIcon:"fa-atom",
    spine:"#061420", cover:"linear-gradient(160deg,#0a3858,#061420)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:10, title:"The Pragmatic Programmer", author:"Andrew Hunt",
    category:"technology", pages:"352", faIcon:"fa-code",
    spine:"#060614", cover:"linear-gradient(160deg,#1a1a4a,#060614)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:11, title:"The Iliad", author:"Homer",
    category:"literature", pages:"683", faIcon:"fa-shield-halved",
    spine:"#120c02", cover:"linear-gradient(160deg,#6b4818,#120c02)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  },
  {
    id:12, title:"Clean Code", author:"Robert C. Martin",
    category:"technology", pages:"464", faIcon:"fa-laptop-code",
    spine:"#080614", cover:"linear-gradient(160deg,#2a1a5a,#080614)",
    pdf:"https://drive.google.com/file/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs/preview"
  }
];

const CAT_ICONS = {
  philosophy:"fa-brain", science:"fa-flask", history:"fa-scroll",
  literature:"fa-feather", technology:"fa-microchip", psychology:"fa-head-side-brain",
  all:"fa-border-all"
};

/* ── STATE ── */
let activeCat = 'all';
let query = '';
let isDark = false;
let isListView = false;

/* ── RENDER ── */
function render() {
  const grid = document.getElementById('booksGrid');
  const empty = document.getElementById('emptyState');

  const books = BOOKS.filter(b => {
    const catOk = activeCat === 'all' || b.category === activeCat;
    const qOk   = !query || b.title.toLowerCase().includes(query) || b.author.toLowerCase().includes(query);
    return catOk && qOk;
  });

  document.getElementById('bookCountStat').textContent = books.length;

  if (!books.length) {
    grid.innerHTML = '';
    empty.classList.add('show');
    return;
  }
  empty.classList.remove('show');

  grid.innerHTML = books.map((b, i) => `
    <article class="book-card" data-id="${b.id}" role="listitem" tabindex="0"
      style="animation-delay:${i*0.048}s" aria-label="${b.title} by ${b.author}">
      <div class="book-card-inner">
        <div class="book-cover-wrap">
          <div class="book-spine" style="background:${b.spine}"></div>
          <div class="book-face" style="background:${b.cover}">
            <div class="cover-dots"></div>
            <div class="cover-top">
              <span class="cover-cat-tag">
                <i class="fas ${CAT_ICONS[b.category]}"></i>
                ${b.category}
              </span>
            </div>
            <div class="cover-mid">
              <div class="cover-icon-wrap">
                <i class="fas ${b.faIcon}"></i>
              </div>
            </div>
            <div class="cover-bot">
              <div class="cover-title">${b.title}</div>
              <div class="cover-author">${b.author}</div>
            </div>
          </div>
        </div>
        <div class="book-badge">Read Now</div>
        <div class="book-meta">
          <div class="book-meta-title">${b.title}</div>
          <div class="book-meta-row">
            <div class="book-meta-author"><i class="fas fa-user-pen"></i>${b.author}</div>
            <div class="book-meta-pages"><i class="fas fa-file-lines"></i>${b.pages}p</div>
          </div>
          <button class="book-open-btn">
            <i class="fas fa-book-open-reader"></i>
            Open Book
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </article>
  `).join('');

  // Events
  grid.querySelectorAll('.book-card').forEach(el => {
    const open = () => openModal(+el.dataset.id);
    el.addEventListener('click', open);
    el.addEventListener('keydown', e => { if (e.key==='Enter'||e.key===' '){e.preventDefault();open();} });
  });
}

/* ── MODAL ── */
function openModal(id) {
  const b = BOOKS.find(x => x.id === id);
  if (!b) return;

  // Populate header
  const thumb = document.getElementById('modalThumb');
  thumb.style.background = b.cover;
  thumb.innerHTML = `<div class="cover-dots"></div><i class="fas ${b.faIcon}" style="position:relative;z-index:1;font-size:1.3rem;color:#fff"></i>`;

  document.getElementById('modalCat').textContent = b.category;
  document.getElementById('modalTitle').textContent = b.title;
  document.getElementById('modalAuthor').textContent = b.author;

  // Show overlay
  const overlay = document.getElementById('overlay');
  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';

  // Load PDF
  const loader = document.getElementById('pdfLoader');
  const frame  = document.getElementById('pdfFrame');
  loader.classList.remove('done');
  frame.src = 'about:blank';

  setTimeout(() => {
    frame.src = b.pdf;
    const hideLoader = () => loader.classList.add('done');
    frame.onload = hideLoader;
    setTimeout(hideLoader, 5000);
  }, 500);
}

function closeModal() {
  const overlay = document.getElementById('overlay');
  overlay.classList.remove('open');
  document.body.style.overflow = '';
  setTimeout(() => { document.getElementById('pdfFrame').src = 'about:blank'; }, 500);
}

document.getElementById('modalClose').addEventListener('click', closeModal);
document.getElementById('overlay').addEventListener('click', e => {
  if (e.target === document.getElementById('overlay')) closeModal();
});
document.addEventListener('keydown', e => { if (e.key==='Escape') closeModal(); });

/* ── DISCOVER ── */
document.getElementById('discoverBtn').addEventListener('click', () => {
  document.getElementById('landing').classList.add('exit');
  document.getElementById('library').classList.add('show');
  setTimeout(() => { document.getElementById('landing').style.display='none'; }, 950);
});

/* ── CATEGORIES ── */
document.getElementById('catTabs').addEventListener('click', e => {
  const tab = e.target.closest('.cat-tab');
  if (!tab) return;
  document.querySelectorAll('.cat-tab').forEach(t => { t.classList.remove('on'); t.setAttribute('aria-selected','false'); });
  tab.classList.add('on');
  tab.setAttribute('aria-selected','true');
  activeCat = tab.dataset.cat;
  render();
});

/* ── SEARCH ── */
document.getElementById('searchInput').addEventListener('input', e => {
  query = e.target.value.toLowerCase().trim();
  render();
});

/* ── VIEW TOGGLE ── */
document.getElementById('gridViewBtn').addEventListener('click', () => {
  isListView = false;
  document.getElementById('booksGrid').classList.remove('list-view');
  document.getElementById('gridViewBtn').classList.add('on');
  document.getElementById('listViewBtn').classList.remove('on');
});
document.getElementById('listViewBtn').addEventListener('click', () => {
  isListView = true;
  document.getElementById('booksGrid').classList.add('list-view');
  document.getElementById('listViewBtn').classList.add('on');
  document.getElementById('gridViewBtn').classList.remove('on');
});

/* ── THEME ── */
document.getElementById('themeBtn').addEventListener('click', () => {
  isDark = !isDark;
  document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
  document.getElementById('themeIcon').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
});

/* ── INIT ── */
render();
</script>
</body>
</html>
